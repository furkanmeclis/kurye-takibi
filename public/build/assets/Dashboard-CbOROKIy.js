import{C as K,r as a,P as U,d as I,m as F,c as D,L as R,R as H,j as e,B as k,y as O,Y as X}from"./app-Dbk8n-uA.js";import{P as $}from"./chart.esm-DmZgz4Hs.js";import{M as E,D as q}from"./message.esm-BokLF7E4.js";import{P as J}from"./ProductService-Bxp4_rce.js";import{P as Q,M as Z}from"./PageContainer-YNtSeWPm.js";import{T as A,g as ee,d as te}from"./ActiveOrder-CeIhvmYC.js";import{T as V}from"./toast.esm-sRjLTCIT.js";import{c as se,b as _}from"./globalHelper-DC93hlCg.js";import{g as re}from"./PersonalInformation-CqC-Xqpm.js";import"./index.esm-Bslw2tBS.js";import"./inputtext.esm-EYuhZLNa.js";import"./PersonalInformation-DEFbDOaG.js";import"./inputmask.esm-C7qk58Dg.js";import"./styleclass.esm-B7AWbbFe.js";import"./sidebar.esm-BTFoFMI-.js";function S(s){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(s)}function ae(s,t){if(S(s)!=="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var r=l.call(s,t||"default");if(S(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function le(s){var t=ae(s,"string");return S(t)==="symbol"?t:String(t)}function ie(s,t,l){return t=le(t),t in s?Object.defineProperty(s,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[t]=l,s}var ne={root:function(t){var l=t.props;return D("p-skeleton p-component",{"p-skeleton-circle":l.shape==="circle","p-skeleton-none":l.animation==="none"})}},oe=`
@layer primereact {
    .p-skeleton {
        position: relative;
        overflow: hidden;
    }
    
    .p-skeleton::after {
        content: "";
        animation: p-skeleton-animation 1.2s infinite;
        height: 100%;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        transform: translateX(-100%);
        z-index: 1;
    }
    
    .p-skeleton-circle {
        border-radius: 50%;
    }
    
    .p-skeleton-none::after {
        animation: none;
    }
}

@keyframes p-skeleton-animation {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(100%);
    }
}
`,ce={root:{position:"relative"}},C=K.extend({defaultProps:{__TYPE:"Skeleton",shape:"rectangle",size:null,width:"100%",height:"1rem",borderRadius:null,animation:"wave",style:null,className:null},css:{classes:ne,inlineStyles:ce,styles:oe}});function z(s,t){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,r)}return l}function B(s){for(var t=1;t<arguments.length;t++){var l=arguments[t]!=null?arguments[t]:{};t%2?z(Object(l),!0).forEach(function(r){ie(s,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):z(Object(l)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(l,r))})}return s}var W=a.memo(a.forwardRef(function(s,t){var l=a.useContext(U),r=C.getProps(s,l),c=C.setMetaData({props:r}),h=c.ptm,N=c.cx,d=c.sx,v=c.isUnstyled;I(C.css.styles,v,{name:"skeleton"});var f=a.useRef(null);a.useImperativeHandle(t,function(){return{props:r,getElement:function(){return f.current}}});var j=r.size?{width:r.size,height:r.size,borderRadius:r.borderRadius}:{width:r.width,height:r.height,borderRadius:r.borderRadius},o=F({ref:f,className:D(r.className,N("root")),style:B(B({},j),d("root")),"aria-hidden":!0},C.getOtherProps(r),h("root"));return a.createElement("div",o)}));W.displayName="Skeleton";const de=({csrfToken:s})=>{const t=a.useRef(null),[l,r]=a.useState(null),c=10;a.useContext(R);const[h,N]=a.useState(!1),[d,v]=a.useState(!0),[f,j]=a.useState(["","","",""]);a.useState({});const o=()=>{t!=null&&t.current&&(v(!0),se(t==null?void 0:t.current).then(n=>{ee(n.latitude,n.longitude,s,c).then(u=>{var w;u.status?(j(u.orders),r(null)):(r(u.message),(w=t==null?void 0:t.current)==null||w.show({severity:"error",summary:"Hata",detail:u.message}))}).catch(u=>{var w;(w=t==null?void 0:t.current)==null||w.show({severity:"error",summary:"Hata",detail:"Siparişler Listelenirken Bir Hata Oluştu"})}).finally(()=>v(!1))}).catch(n=>{v(!1)}))},m=n=>{O.visit(route("courier.orders.reviewOrder",n))};return H.useEffect(()=>{o()},[t]),e.jsxs(e.Fragment,{children:[e.jsx(V,{ref:t}),e.jsxs("div",{className:"card h-full",children:[e.jsxs("h6",{className:"flex justify-content-between align-items-center",children:[e.jsxs("span",{children:["Yakın Siparişler(Konuma Göre) ",e.jsx(A,{value:"New",severity:"warning"})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(k,{icon:"pi pi-refresh",loading:d,tooltip:"Verileri Yenile",tooltipOptions:{position:"top"},onClick:o,raised:!0,size:"small"})})]}),l!==null&&e.jsx(E,{text:l,className:"w-full mb-3",severity:"error"}),h&&e.jsx(E,{text:"Konum Bilgisi Alınamadı",className:"w-full",severity:"error"}),!h&&e.jsxs("ul",{className:"list-none p-0 m-0 relative",children:[d&&Array.from({length:c}).map((n,u)=>e.jsx("li",{className:"mb-2 flex align-items-center",children:e.jsx("div",{className:"w-full",children:e.jsx(W,{width:"100%",height:"2rem"})})},u)),!d&&f.length>0&&e.jsxs("li",{className:"w-full px-2 mb-2 flex align-items-center justify-content-between font-semibold text-sm",children:[e.jsx("span",{className:"flex-1 text-left",children:"İşletme Adı"}),e.jsx("span",{className:"flex-1 text-center",children:"Paket Ücreti"}),e.jsx("span",{className:"flex-1 text-right",children:"İşletmeye Uzaklık"})]}),!d&&f.map((n,u)=>e.jsx("li",{onClick:()=>m(n.id),className:"mb-2 flex hover:text-primary-900 align-items-center hover:bg-primary-300 border-1 border-gray-400 cursor-pointer hover:border-primary transition-all transition-duration-400 h-2rem w-full px-2 py-4 border-round",children:e.jsxs("div",{className:"flex align-items-center justify-content-between w-full",children:[e.jsx("div",{className:"flex-1 font-semibold",children:n.business.name}),e.jsxs("div",{className:"text-center flex-1",children:[n.price," ₺"]}),e.jsxs("div",{className:"text-right flex-1 ",children:[n.distance,e.jsx("span",{className:"font-semibold",children:"km"})]})]})},u)),!d&&f.length===0&&e.jsx("li",{className:"mb-2 flex hover:text-primary-900 align-items-center bg-primary-300 hover:bg-red-400 hover:text-white border-1 hover:border-gray-400 border-primary transition-all transition-duration-400 h-2rem w-full px-2 py-4 border-round",children:e.jsx("div",{className:"flex align-items-center justify-content-center w-full",children:e.jsx("span",{children:"Yakınınızda Sipariş Bulunamadı"})})}),!d&&f.length!==c&&Array.from({length:c-f.length-1}).map((n,u)=>e.jsx("li",{className:"mb-2 flex align-items-center",children:e.jsx("div",{className:"ml-3 w-full h-2rem"})},u))]}),e.jsx(k,{type:"button",loading:d,className:"w-full mt-3",label:"Hepsini Görüntüle",onClick:()=>O.visit(route("courier.orders.newOrders")),icon:"pi pi-arrow-right",iconPos:"right"})]})]})},me=({csrfToken:s})=>{const t=a.useRef(null),[l,r]=a.useState(null),c=10;a.useContext(R),a.useState(!1);const[h,N]=a.useState(!0),[d,v]=a.useState(["","","",""]);a.useState({});const f=()=>{N(!0),te(c,s).then(o=>{var m;o.status?(v(o.orders),r(null)):(r(o.message),(m=t==null?void 0:t.current)==null||m.show({severity:"error",summary:"Hata",detail:o.message}))}).catch(o=>{var m;(m=t==null?void 0:t.current)==null||m.show({severity:"error",summary:"Hata",detail:"Siparişler Listelenirken Bir Hata Oluştu"})}).finally(()=>N(!1))},j=o=>{O.visit(route("courier.orders.show",o))};return H.useEffect(()=>{f()},[t]),e.jsxs(e.Fragment,{children:[e.jsx(V,{ref:t}),e.jsxs("div",{className:"card h-full",children:[e.jsxs("h6",{className:"flex justify-content-between align-items-center",children:[e.jsx("span",{children:"Geçmiş Siparişler"}),e.jsx("div",{className:"flex gap-1",children:e.jsx(k,{icon:"pi pi-refresh",loading:h,tooltip:"Verileri Yenile",tooltipOptions:{position:"top"},onClick:f,raised:!0,size:"small"})})]}),l!==null&&e.jsx(E,{text:l,className:"w-full mb-3",severity:"error"}),e.jsxs("ul",{className:"list-none p-0 m-0 relative",children:[h&&Array.from({length:c}).map((o,m)=>e.jsx("li",{className:"mb-2 flex align-items-center",children:e.jsx("div",{className:"w-full",children:e.jsx(W,{width:"100%",height:"2rem"})})},m)),!h&&d.length>0&&e.jsxs("li",{className:"w-full px-2 mb-2 flex align-items-center justify-content-between font-semibold text-sm",children:[e.jsx("span",{className:"flex-1 text-left",children:"İşletme Adı"}),e.jsx("span",{className:"flex-1 text-center",children:"Paket Ücreti"}),e.jsx("span",{className:"flex-1 text-right",children:"Durumu"})]}),!h&&d.map((o,m)=>{var n,u;return e.jsx("li",{onClick:()=>j(o.id),className:"mb-2 flex hover:text-primary-900 align-items-center hover:bg-primary-300 border-1 border-gray-400 cursor-pointer hover:border-primary transition-all transition-duration-400 h-2rem w-full px-2 py-4 border-round",children:e.jsxs("div",{className:"flex align-items-center justify-content-between w-full",children:[e.jsx("div",{className:"flex-1 font-semibold",children:o.business.name}),e.jsxs("div",{className:"text-center flex-1",children:[o.price," ₺"]}),e.jsx("div",{className:"text-right flex-1 ",children:e.jsx(A,{value:(n=_(o.status,!1,o.cancellation_accepted===1,o.cancellation_rejected===1))==null?void 0:n.label,severity:(u=_(o.status,!1,o.cancellation_accepted===1,o.cancellation_rejected===1))==null?void 0:u.severity})})]})},m)}),!h&&d.length===0&&e.jsx("li",{className:"mb-2 flex hover:text-primary-900 align-items-center bg-primary-300 hover:bg-red-400 hover:text-white border-1 hover:border-gray-400 border-primary transition-all transition-duration-400 h-2rem w-full px-2 py-4 border-round",children:e.jsx("div",{className:"flex align-items-center justify-content-center w-full",children:e.jsx("span",{children:"Sipariş Bulunamadı"})})}),!h&&d.length!==c&&Array.from({length:c-d.length-1}).map((o,m)=>e.jsx("li",{className:"mb-2 flex align-items-center",children:e.jsx("div",{className:"ml-3 w-full h-2rem"})},m))]}),e.jsx(k,{type:"button",loading:h,className:"w-full mt-3",label:"Hepsini Görüntüle",onClick:()=>O.visit(route("courier.orders.pastOrders")),icon:"pi pi-arrow-right",iconPos:"right"})]})]})};let x;function Ce({auth:s,csrfToken:t,errors:l,courierIsTransporting:r=!1}){const{layoutConfig:c}=a.useContext(R),[h,N]=a.useState([]),[d,v]=a.useState(null);a.useState(null);const[f,j]=a.useState(null),[o,m]=a.useState(!1),[n,u]=a.useState({price:0,speed:0,time:0,count:0,graph:{thisWeek:{prices:[],counts:[],times:[]},lastWeek:{prices:[],counts:[],times:[]}}}),w=()=>{m(!0),re(t).then(i=>{i.status&&(u(i.statics),x.datasets[0].data=i.statics.graph.thisWeek.counts,x.datasets[1].data=i.statics.graph.thisWeek.prices,x.datasets[2].data=i.statics.graph.thisWeek.times,x={...x})})};a.useEffect(()=>{w()},[]);const L=[{name:"Bu Hafta",code:"0"},{name:"Geçen Hafta",code:"1"}],G=()=>{j(L[0])},M=i=>{j(i.value),i.value.code==="1"?(x.datasets[0].data=n.graph.lastWeek.counts,x.datasets[1].data=n.graph.lastWeek.prices,x.datasets[2].data=n.graph.lastWeek.times):(x.datasets[0].data=n.graph.thisWeek.counts,x.datasets[1].data=n.graph.thisWeek.prices,x.datasets[2].data=n.graph.thisWeek.times),x={...x}},T=()=>{const i=getComputedStyle(document.documentElement),p=i.getPropertyValue("--primary-color"),g=i.getPropertyValue("--primary-600");return{labels:["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],datasets:[{label:"Sipariş Adedi",data:[],backgroundColor:[p],hoverBackgroundColor:[g],fill:!0,borderRadius:"3",borderSkipped:"top bottom",barPercentage:.5},{label:"Sipariş Ücreti (TL)",data:[],backgroundColor:[i.getPropertyValue("--cyan-300")],hoverBackgroundColor:[i.getPropertyValue("--cyan-600")],fill:!0,borderRadius:"3",borderSkipped:"top bottom",barPercentage:.5},{label:"Sipariş Teslimat Süresi (dk)",data:[],backgroundColor:[i.getPropertyValue("--pink-300")],hoverBackgroundColor:[i.getPropertyValue("--pink-600")],fill:!0,borderRadius:"1",borderSkipped:"top bottom",barPercentage:.5}]}},P=i=>`/demo/images/dashboard/${i}.svg`;return a.useEffect(()=>{G()},[]),a.useEffect(()=>{J.getProductsSmall().then(y=>N(y));const i=getComputedStyle(document.documentElement),p=i.getPropertyValue("--text-color-secondary"),g=i.getPropertyValue("--surface-border");x=T(),v({plugins:{legend:{position:"bottom",align:"end",labels:{color:p}}},responsive:!0,maintainAspectRatio:!1,hover:{mode:"index"},scales:{y:{min:0,ticks:{stepSize:0,color:p},grid:{color:g}},x:{grid:{tickBorderDash:[2,2],display:!0,color:g},ticks:{color:p}}}})},[c]),e.jsx(Q,{auth:s,csrfToken:t,errors:l,courierIsTransporting:r,children:e.jsxs(Z,{children:[e.jsx(X,{title:"Kurye Anasayfa"}),e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-clock text-6xl text-blue-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-blue-500 block white-space-nowrap",children:"Ortalama Teslimat Süresi"}),e.jsxs("span",{className:"text-blue-500 block text-4xl font-bold",children:[n.time,"dk"]})]})]}),e.jsx("img",{src:P("users"),className:"w-full",alt:"users"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-turkish-lira text-6xl text-orange-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-orange-500 block white-space-nowrap",children:"Elde Edilen Kazanç"}),e.jsxs("span",{className:"text-orange-500 block text-4xl font-bold",children:[n.price," ₺"]})]})]}),e.jsx("img",{src:P("locations"),className:"w-full",alt:"locations"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card h-full p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-box text-6xl text-purple-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-purple-500 block white-space-nowrap",children:"Teslim Edilen Sipariş Adedi"}),e.jsx("span",{className:"text-purple-500 block text-4xl font-bold",children:n.count})]})]}),e.jsx("img",{src:P("interactions"),className:"w-full mt-auto",alt:"interactions"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-bolt text-6xl text-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-green-500 block white-space-nowrap",children:"Siparişlerdeki Ortalama Hız"}),e.jsxs("span",{className:"text-green-500 block text-4xl font-bold",children:[n.speed,"km/h "]})]})]}),e.jsx("img",{src:P("rate"),className:"w-full",alt:"conversion"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsx(de,{csrfToken:t})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsx(me,{csrfToken:t})}),e.jsx("div",{className:"col-12 xl:col-6",children:e.jsxs("div",{className:"card h-full",children:[e.jsxs("div",{className:"flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{children:"Günlük Sipariş Grafiği"}),e.jsxs("div",{children:[e.jsx(q,{options:L,value:f,onChange:M,optionLabel:"name"}),e.jsx(k,{icon:"pi pi-cloud-download",tooltip:"PNG olarak kaydet",tooltipOptions:{position:"top"},className:"ml-2",severity:"secondary",outlined:!0,onClick:()=>{const i=document.querySelector(".graph canvas"),p=document.createElement("canvas");p.width=i.width,p.height=i.height;const g=p.getContext("2d");if(g){g.fillStyle="white",g.drawImage(i,0,0);const y=document.createElement("a");y.href=p.toDataURL("image/png");let b=Math.random().toString(36).substring(7);y.download=`siparis-grafigi-${b}.png`,y.click()}}}),e.jsx(k,{icon:"pi pi-print",tooltip:"Yazdır",tooltipOptions:{position:"top"},className:"ml-2",severity:"secondary",outlined:!0,onClick:async()=>{const i=document.querySelector(".graph canvas"),p=document.createElement("canvas");p.width=i.width,p.height=i.height,p.style.backgroundColor="#000";const g=p.getContext("2d");if(g){g.drawImage(i,0,0);const y=new Image;y.src=p.toDataURL("image/png",1),await new Promise(Y=>{y.onload=Y});const b=window.open("");b==null||b.document.write(y.outerHTML),await(b==null?void 0:b.print()),b==null||b.close()}}})]})]}),e.jsx("div",{className:"graph",children:e.jsx($,{type:"bar",height:"400px",data:x,options:d})})]})})]})]})})}export{Ce as default};
