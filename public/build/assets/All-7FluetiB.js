import{r as h,u as V,R as S,j as t,c as Y,B as d,y as F,Y as $,a as x}from"./app-Q7AXU0aI.js";import{P as I,M as q}from"./PageContainer-BIYmXk4n.js";import{T as J}from"./toast.esm-CfmbWQEZ.js";import{g as Q,d as U,a as W,m as X,b as Z}from"./couriers-BFRc8dnL.js";import{D as ee,C as te}from"./column.esm-ChOjKaFr.js";import{M as A}from"./message.esm-BdhDmTuC.js";import{C as ie,T as re}from"./checkbox.esm-C5GvCFvh.js";import{O as ae,D as le}from"./ActiveOrder-CRyMwc2f.js";import{T as se}from"./tristatecheckbox.esm-fHoAbalR.js";import{l as ne}from"./index-CF634oc6.js";import{g as oe,a as ce}from"./globalHelper-DmSEk4ia.js";import"./PersonalInformation-BeSBW7zC.js";import"./inputtext.esm-DYxVi6bR.js";import"./inputmask.esm-DFOdfNHf.js";import"./car-BnQ5UupV.js";import"./PersonalInformation-CbdU5Zyv.js";import"./styleclass.esm-D-qKL6b3.js";import"./sidebar.esm-DXtzmneN.js";import"./index.esm-De60uoIs.js";import"./inputswitch.esm-BN_GMhiZ.js";import"./index.esm-Cdomumk4.js";const Le=({auth:L,csrfToken:g,flash:m})=>{const[b,s]=h.useState(!0),[p,v]=h.useState([]),[f,y]=h.useState([]),[c,k]=V(["name","email","phone","created_at","actions"],"adminCouriersApprovedColumns"),[w,j]=h.useState(null),[_,C]=h.useState(!1),[K,O]=h.useState(null),z=S.useRef(null),D=ne.useReactToPrint({contentRef:z}),M=e=>{let i=[];return e===null||Object.entries(e).forEach(([r,a])=>{typeof a=="string"&&(r!=="courier"||r!=="status"||r!=="completed"||r!=="approved"||r!=="latitude"||r!=="longitude"||r!=="id"||r!=="courier_id"||r!=="created_at"||r!=="updated_at")&&i.push({label:oe(String(r)),value:ce(String(r),String(a))})}),i},N=()=>{s(!0),Q("all",g).then(e=>{e.status?(v(e.couriers.map(i=>({...i,activated:i.activated===1}))),s(!1),j(null)):(j(e.message),s(!1))}).catch(e=>{j(e.message),s(!1)}).finally(()=>s(!1))};h.useEffect(()=>{var e;N(),m!=null&&m.message&&((e=l.current)==null||e.show({severity:(m==null?void 0:m.type)??"info",summary:m.title,detail:m.message??""}))},[]);const R=(e,i)=>{x({target:e.currentTarget,message:"Kuryeyi silmek istediğinize emin misiniz?",acceptLabel:"Sil",acceptClassName:"p-button-danger",rejectLabel:"Vazgeç",accept(){s(!0),U(i,g).then(({status:r,message:a})=>{var n,o;r?(v(p.filter(u=>u.id!==i)),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:a})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:a})}).catch(r=>{var a;(a=l.current)==null||a.show({severity:"error",summary:"Hata",detail:r.message})}).finally(()=>s(!1))}})},H=(e,i)=>{x({target:e.currentTarget,message:"Seçilen kuryeler silinecektir. Silmek istediğinize emin misiniz?",acceptLabel:`Sil (${i.length} Kurye)`,acceptClassName:"p-button-danger",rejectLabel:"Vazgeç",accept(){s(!0),X(i,g).then(({status:r,message:a})=>{var n,o;r?(v(p.filter(u=>!i.includes(u.id))),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:a})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:a})}).catch(r=>{var a;(a=l.current)==null||a.show({severity:"error",summary:"Hata",detail:r.message})}).finally(()=>s(!1))}})},B=(e,i)=>{x({target:e.currentTarget,message:"Kurye Hesabı Aktifleştirilecektir. Aktifleştirmek istediğinize emin misiniz?",acceptLabel:"Aktfileştir",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){s(!0),W(i,g).then(({status:r,message:a})=>{var n,o;r?(v(p.map(u=>u.id===i?{...u,activated:!0,activated_at:new Date().toISOString()}:u)),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:a})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:a})}).catch(r=>{var a;(a=l.current)==null||a.show({severity:"error",summary:"Hata",detail:r.message})}).finally(()=>s(!1))}})},E=(e,i)=>{x({target:e.currentTarget,message:"Seçilen kuryelerin hesapları aktifleştirilecektir. Aktifleştirmek istediğinize emin misiniz?",acceptLabel:`Aktifleştir (${i.length} Kurye)`,acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){s(!0),Z(i,g).then(({status:r,message:a})=>{var n,o;r?(v(p.map(u=>i.includes(u.id)?{...u,activated:!0,activated_at:new Date().toISOString()}:u)),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:a})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:a})}).catch(r=>{var a;(a=l.current)==null||a.show({severity:"error",summary:"Hata",detail:r.message})}).finally(()=>s(!1))}})};let T=[{selectionMode:"multiple",headerStyle:{width:"3rem"},header:""},{field:"name",header:"Adı Soyadı",hidden:!c.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!c.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!c.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"activated",header:"Aktiflik Durumu",hidden:!c.includes("activated"),sortable:!0,filter:!0,dataType:"boolean",filterElement:e=>t.jsx(se,{value:e.value,onChange:i=>e.filterApplyCallback(i.value)}),body:e=>t.jsx("i",{className:Y("pi",{"pi-check-circle text-green-400":e.activated,"pi-times-circle text-red-400":!e.activated})})},{field:"activated_at",header:"Aktifleştirme Tarihi",hidden:!c.includes("activated_at"),sortable:!0,filter:!0,filterPlaceholder:"Aktifleştirme Tarihine Göre",filterType:"date",body:e=>t.jsx("span",{children:e.activated_at===null?t.jsx("i",{className:"pi pi-times-circle text-red-400"}):new Date(e.activated_at).toLocaleString()})},{field:"created_at",header:"Kayıt Tarihi",hidden:!c.includes("created_at"),sortable:!0,filter:!0,filterPlaceholder:"Kayıt Tarihine Göre",filterType:"date",body:e=>t.jsx("span",{children:new Date(e.created_at).toLocaleString()})},{field:"updated_at",header:"Güncelleme Tarihi",hidden:!c.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Güncellenme Tarihine Göre",filterType:"date",body:e=>t.jsx("span",{children:new Date(e.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!c.includes("actions"),body:e=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx(d,{icon:"pi pi-print",tooltip:"Kurye Bilgilerini Yazdır",severity:"help",size:"small",tooltipOptions:{position:"top"},onClick:i=>{O(e.details),C(!0)}}),t.jsx(d,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Aktifleştir",tooltipOptions:{position:"top"},visible:!e.activated,onClick:i=>{B(i,e.id)}}),t.jsx(d,{size:"small",icon:"pi pi-pencil",severity:"warning",tooltip:"Düzenle",tooltipOptions:{position:"top"},onClick:()=>{F.visit(route("admin.couriers.edit",{id:e.id}))}}),t.jsx(d,{size:"small",icon:"pi pi-trash",severity:"danger",tooltip:"Sil",tooltipOptions:{position:"top"},onClick:i=>{R(i,e.id)}})]})}];const P=S.useRef(null),G=()=>t.jsx(t.Fragment,{children:t.jsx(re,{start:f.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(d,{size:"small",icon:"pi pi-check-circle",className:"mr-2",tooltip:"Toplu Aktifleştirme Yapmanızı Sağlar",tooltipOptions:{position:"top"},visible:f.map(e=>e.activated?null:e.id).filter(e=>e!==null).length>0,label:"Aktifleştir ("+f.map(e=>e.activated?null:e.id).filter(e=>e!==null).length+")",severity:"success",onClick:e=>{E(e,f.map(i=>i.activated?null:i.id).filter(i=>i!==null))}}),t.jsx(d,{size:"small",icon:"pi pi-trash",className:"mr-2",tooltip:"Seçilen Kuryeleri Silmenizi Sağlar",tooltipOptions:{position:"top"},label:"Sil ("+f.length+")",severity:"danger",onClick:e=>{H(e,f.map(i=>i.id))}}),t.jsx(d,{size:"small",icon:"pi pi-filter-slash",label:"Seçimi Temizle",severity:"warning",onClick:()=>y([])})]}),end:t.jsxs(t.Fragment,{children:[t.jsx(d,{size:"small",icon:"pi pi-sync",severity:"help",className:"mr-2",tooltip:"Verileri Yenile",tooltipOptions:{position:"top"},onClick:()=>{N()}}),t.jsx(d,{icon:"pi pi-bars",onClick:e=>{var i;(i=P.current)==null||i.toggle(e)}})]})})}),l=S.useRef(null);return t.jsx(I,{auth:L,csrfToken:g,children:t.jsxs(q,{children:[t.jsx($,{title:"Tüm Kuryeler"}),t.jsx(J,{ref:l}),t.jsxs(ae,{ref:P,showCloseIcon:!0,style:{width:"300px"},children:[t.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:t.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",c.length,")"]})}),t.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:T.map((e,i)=>{if(e.selectionMode==="multiple")return null;let r=e.header,a=e.field;return t.jsxs("div",{className:"flex align-items-center",children:[t.jsx(ie,{inputId:`column${i}`,checked:c.includes(a),onChange:n=>{n.checked?k([...c,a]):k(c.filter(o=>o!==a))}}),t.jsx("label",{htmlFor:`column${i}`,className:"ml-2",children:r})]},i)})})]}),t.jsxs("div",{className:"card",children:[t.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Tüm Kuryeler"}),w!==null&&t.jsx(A,{className:"w-full",severity:"error",text:w}),!b&&p.length===0&&t.jsx(A,{className:"w-full",severity:"info",text:"Kurye bulunamadı."}),t.jsx(ee,{hidden:!b&&p.length===0||w!==null,loading:b,value:p,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:G,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"},activated:{value:null,matchMode:"equals"}},emptyMessage:"Kurye bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",selectionMode:"checkbox",selection:f,onSelectionChange:e=>y(e.value),children:T.map((e,i)=>t.jsx(te,{...e},i))})]}),t.jsx(le,{header:"Kurye Bilgilerini Yazdır",draggable:!1,footer:t.jsxs("div",{className:"gap-2",children:[t.jsx(d,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>C(!1)}),t.jsx(d,{size:"small",icon:"pi pi-print",label:"Yazdır",severity:"success",tooltip:"Yazdır",tooltipOptions:{position:"top"},onClick:()=>{D()}})]}),onHide:()=>C(!1),visible:_,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:t.jsx("div",{children:t.jsx("dl",{ref:z,className:"tw-max-w-md tw-text-gray-900 tw-divide-y tw-divide-gray-300 tw-print:tw-text-black tw-print:tw-divide-gray-400",children:M(K).map((e,i)=>t.jsxs("div",{className:"tw-flex tw-flex-col tw-pb-3 tw-mb-1 tw-print:tw-pb-2 tw-print:tw-mb-2 tw-border-b tw-border-gray-300",children:[t.jsx("dt",{className:"tw-mb-1 tw-text-gray-600 tw-print:tw-text-gray-800 tw-text-sm",children:e.label}),t.jsx("dd",{className:"tw-font-semibold tw-m-0 tw-text-base tw-print:tw-font-bold",children:e.value})]},i))})})})]})})};export{Le as default};
