import{r as n,u as A,j as e,B as r,R as v,Y as G,a as K}from"./app-Q7AXU0aI.js";import{P as H,M as V}from"./PageContainer-BIYmXk4n.js";import{T as Y}from"./toast.esm-CfmbWQEZ.js";import{g as I,e as W}from"./businesses-B8cWdWWF.js";import{D as M,C as j}from"./column.esm-ChOjKaFr.js";import{M as T}from"./message.esm-BdhDmTuC.js";import{C as $,T as q}from"./checkbox.esm-C5GvCFvh.js";import{O as J,D}from"./ActiveOrder-CRyMwc2f.js";import{g as Q,a as U}from"./globalHelper-DmSEk4ia.js";import{l as X}from"./index-CF634oc6.js";import"./PersonalInformation-BeSBW7zC.js";import"./inputtext.esm-DYxVi6bR.js";import"./inputmask.esm-DFOdfNHf.js";import"./car-BnQ5UupV.js";import"./PersonalInformation-CbdU5Zyv.js";import"./styleclass.esm-D-qKL6b3.js";import"./sidebar.esm-DXtzmneN.js";import"./index.esm-De60uoIs.js";import"./inputswitch.esm-BN_GMhiZ.js";import"./index.esm-Cdomumk4.js";const we=({auth:R,csrfToken:h})=>{const[g,o]=n.useState(!0),[k,c]=n.useState(!1),[_,x]=n.useState(!1),[u,y]=n.useState([]),[d,P]=n.useState(null),[i,N]=A(["name","email","phone","details_button","created_at","actions"],"adminBusinessesWaitApprovalDetailsColumns"),[b,w]=n.useState(null);n.useEffect(()=>{I("waitApprovals",h).then(t=>{t.status?(y(t.details),o(!1),w(null)):(w(t.message),o(!1))}).catch(t=>{w(t.message),o(!1)})},[]);const O=(t,l)=>{K({target:t.currentTarget,message:"İşletme Bilgileri Onaylanacaktır. Onaylamak istediğinize emin misiniz?",acceptLabel:"Onayla",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){o(!0),W(l,h).then(({status:s,message:a})=>{var p,f;s?(y(u.filter(F=>F.business.id!==l)),(p=m.current)==null||p.show({severity:"success",summary:"Başarılı",detail:a})):(f=m.current)==null||f.show({severity:"error",summary:"Hata",detail:a})}).catch(s=>{var a;(a=m.current)==null||a.show({severity:"error",summary:"Hata",detail:s.message})}).finally(()=>{o(!1),c(!1)})}})};let B=[{field:"name",header:"Adı Soyadı",hidden:!i.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!i.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!i.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"details_button",header:"İşletme Bilgileri",hidden:!i.includes("details_button"),align:"center",body:t=>e.jsx(e.Fragment,{children:e.jsx(r,{icon:"pi pi-file",tooltip:"İşletme Bilgileri",severity:"info",size:"small",tooltipOptions:{position:"top"},onClick:l=>{P(t),c(!0)}})})},{field:"updated_at",header:"Bilgilerin Güncellenme Tarihi",hidden:!i.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Bilgilerin Güncellenme Tarihine Göre",filterType:"date",body:t=>e.jsx("span",{children:new Date(t.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!i.includes("actions"),body:t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{icon:"pi pi-print",tooltip:"İşletme Bilgilerini Yazdır",severity:"help",size:"small",tooltipOptions:{position:"top"},onClick:l=>{P(t),x(!0)}}),e.jsx(r,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:l=>{O(l,t.business.id)}})]})}];const C=v.useRef(null),z=t=>{let l=[];return t===null||Object.entries(t).forEach(([s,a])=>{typeof a=="string"&&(s!=="courier"||s!=="status"||s!=="completed"||s!=="approved"||s!=="latitude"||s!=="longitude"||s!=="id"||s!=="courier_id"||s!=="created_at"||s!=="updated_at")&&l.push({label:Q(String(s)),value:U(String(s),String(a))})}),l},L=()=>e.jsx(e.Fragment,{children:e.jsx(q,{end:e.jsx(e.Fragment,{children:e.jsx(r,{icon:"pi pi-bars",onClick:t=>{var l;(l=C.current)==null||l.toggle(t)}})})})}),m=v.useRef(null),S=v.useRef(null),E=X.useReactToPrint({contentRef:S});return e.jsx(H,{auth:R,csrfToken:h,children:e.jsxs(V,{children:[e.jsx(G,{title:"Onay Bekleyen İşletmeler"}),e.jsx(Y,{ref:m}),e.jsxs(J,{ref:C,showCloseIcon:!0,style:{width:"300px"},children:[e.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:e.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",i.length,")"]})}),e.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:B.map((t,l)=>{if(t.selectionMode==="multiple")return null;let s=t.header,a=t.field;return e.jsxs("div",{className:"flex align-items-center",children:[e.jsx($,{inputId:`column${l}`,checked:i.includes(a),onChange:p=>{p.checked?N([...i,a]):N(i.filter(f=>f!==a))}}),e.jsx("label",{htmlFor:`column${l}`,className:"ml-2",children:s})]},l)})})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Onay Bekleyen İşletmeler (İşletme Bilgileri Onay Ekranı)"}),b!==null&&e.jsx(T,{className:"w-full",severity:"error",text:b}),!g&&u.length===0&&e.jsx(T,{className:"w-full",severity:"info",text:"Onay bekleyen İşletme bulunamadı."}),e.jsx(M,{hidden:!g&&u.length===0||b!==null,loading:g,value:u,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:L,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},emptyMessage:"İşletme bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:B.map((t,l)=>e.jsx(j,{...t},l))}),e.jsx(D,{header:"İşletme Bilgileri",draggable:!1,footer:e.jsxs("div",{className:"gap-2",children:[e.jsx(r,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>c(!1)}),e.jsx(r,{size:"small",icon:"pi pi-check-circle",label:"Bilgileri Onayla",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:t=>{var l;O(t,(l=d==null?void 0:d.business)==null?void 0:l.id)}})]}),onHide:()=>c(!1),visible:k,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:e.jsxs(M,{value:z(d),filters:{label:{value:null,matchMode:"contains"},value:{value:null,matchMode:"contains"}},filterDisplay:"row",paginator:!0,stripedRows:!0,rows:5,children:[e.jsx(j,{field:"label",showFilterMenu:!1,filter:!0,header:"Anahtar"}),e.jsx(j,{field:"value",showFilterMenu:!1,filter:!0,header:"Değer"})]})}),e.jsx(D,{header:"İşletme Bilgilerini Yazdır",draggable:!1,footer:e.jsxs("div",{className:"gap-2",children:[e.jsx(r,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>x(!1)}),e.jsx(r,{size:"small",icon:"pi pi-print",label:"Yazdır",severity:"success",tooltip:"Yazdır",tooltipOptions:{position:"top"},onClick:()=>{E()}})]}),onHide:()=>x(!1),visible:_,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:e.jsx("div",{children:e.jsx("dl",{ref:S,className:"tw-max-w-md tw-text-gray-900 tw-divide-y tw-divide-gray-300 tw-print:tw-text-black tw-print:tw-divide-gray-400",children:z(d).map((t,l)=>e.jsxs("div",{className:"tw-flex tw-flex-col tw-pb-3 tw-mb-1 tw-print:tw-pb-2 tw-print:tw-mb-2 tw-border-b tw-border-gray-300",children:[e.jsx("dt",{className:"tw-mb-1 tw-text-gray-600 tw-print:tw-text-gray-800 tw-text-sm",children:t.label}),e.jsx("dd",{className:"tw-font-semibold tw-m-0 tw-text-base tw-print:tw-font-bold",children:t.value})]},l))})})})]})]})})};export{we as default};
