import{r as s,u as L,j as e,B as o,R as O,Y as R,a as k}from"./app-BMEi1DEl.js";import{P as z,M as E}from"./PageContainer-DZqaf_Jd.js";import{T as F}from"./toast.esm-hnqurAYi.js";import{g as A,e as G}from"./couriers-BFRc8dnL.js";import{D as N,C as j}from"./column.esm-yEqicbNM.js";import{M as D}from"./message.esm-Xdmsoey5.js";import{C as H,T as V}from"./checkbox.esm-BVWp1tAo.js";import{O as I,D as W}from"./ActiveOrder-_bfOW0KQ.js";import{g as $,a as Y}from"./globalHelper-Dvraz-WU.js";import"./PersonalInformation-CdqNPyAs.js";import"./inputtext.esm-BHb0MQd6.js";import"./inputmask.esm-MLK-uFak.js";import"./car-BnQ5UupV.js";import"./PersonalInformation-DxCZjOlr.js";import"./styleclass.esm-BM8HIDaB.js";import"./sidebar.esm-HsiVc5qy.js";import"./index.esm-lbq44yXO.js";import"./inputswitch.esm-CduDipFp.js";import"./index.esm-F9rBsrGB.js";const pe=({auth:M,csrfToken:h})=>{const[g,n]=s.useState(!0),[S,u]=s.useState(!1),[c,v]=s.useState([]),[d,B]=s.useState(null),[i,b]=L(["name","email","phone","details_button","created_at","actions"],"adminCouriersWaitApprovalDetailsColumns"),[x,y]=s.useState(null);s.useEffect(()=>{A("waitApprovals",h).then(t=>{t.status?(v(t.details),n(!1),y(null)):(y(t.message),n(!1))}).catch(t=>{y(t.message),n(!1)})},[]);const w=(t,a)=>{k({target:t.currentTarget,message:"Kurye Bilgileri Onaylanacaktır. Onaylamak istediğinize emin misiniz?",acceptLabel:"Onayla",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){n(!0),G(a,h).then(({status:l,message:r})=>{var p,f;l?(v(c.filter(_=>_.courier.id!==a)),(p=m.current)==null||p.show({severity:"success",summary:"Başarılı",detail:r})):(f=m.current)==null||f.show({severity:"error",summary:"Hata",detail:r})}).catch(l=>{var r;(r=m.current)==null||r.show({severity:"error",summary:"Hata",detail:l.message})}).finally(()=>{n(!1),u(!1)})}})};let C=[{field:"name",header:"Adı Soyadı",hidden:!i.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!i.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!i.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"details_button",header:"Kurye Bilgileri",hidden:!i.includes("details_button"),align:"center",body:t=>e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-file",tooltip:"Kurye Bilgileri",severity:"info",size:"small",tooltipOptions:{position:"top"},onClick:a=>{B(t),u(!0)}})})},{field:"updated_at",header:"Bilgilerin Güncellenme Tarihi",hidden:!i.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Bilgilerin Güncellenme Tarihine Göre",filterType:"date",body:t=>e.jsx("span",{children:new Date(t.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!i.includes("actions"),body:t=>e.jsx("div",{className:"flex gap-2",children:e.jsx(o,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:a=>{w(a,t.courier.id)}})})}];const P=O.useRef(null),T=t=>{let a=[];return t===null||Object.entries(t).forEach(([l,r])=>{typeof r=="string"&&(l!=="courier"||l!=="status"||l!=="completed"||l!=="approved"||l!=="latitude"||l!=="longitude"||l!=="id"||l!=="courier_id"||l!=="created_at"||l!=="updated_at")&&a.push({label:$(String(l)),value:Y(String(l),String(r))})}),a},K=()=>e.jsx(e.Fragment,{children:e.jsx(V,{end:e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-bars",onClick:t=>{var a;(a=P.current)==null||a.toggle(t)}})})})}),m=O.useRef(null);return e.jsx(z,{auth:M,csrfToken:h,children:e.jsxs(E,{children:[e.jsx(R,{title:"Onay Bekleyen Kuryeler"}),e.jsx(F,{ref:m}),e.jsxs(I,{ref:P,showCloseIcon:!0,style:{width:"300px"},children:[e.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:e.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",i.length,")"]})}),e.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:C.map((t,a)=>{if(t.selectionMode==="multiple")return null;let l=t.header,r=t.field;return e.jsxs("div",{className:"flex align-items-center",children:[e.jsx(H,{inputId:`column${a}`,checked:i.includes(r),onChange:p=>{p.checked?b([...i,r]):b(i.filter(f=>f!==r))}}),e.jsx("label",{htmlFor:`column${a}`,className:"ml-2",children:l})]},a)})})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Onay Bekleyen Kuryeler (Kurye Bilgileri Onay Ekranı)"}),x!==null&&e.jsx(D,{className:"w-full",severity:"error",text:x}),!g&&c.length===0&&e.jsx(D,{className:"w-full",severity:"info",text:"Onay bekleyen kurye bulunamadı."}),e.jsx(N,{hidden:!g&&c.length===0||x!==null,loading:g,value:c,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:K,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},emptyMessage:"Kurye bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:C.map((t,a)=>e.jsx(j,{...t},a))}),e.jsx(W,{header:"Kurye Bilgileri",draggable:!1,footer:e.jsxs("div",{className:"gap-2",children:[e.jsx(o,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>u(!1)}),e.jsx(o,{size:"small",icon:"pi pi-check-circle",label:"Bilgileri Onayla",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:t=>{var a;w(t,(a=d==null?void 0:d.courier)==null?void 0:a.id)}})]}),onHide:()=>u(!1),visible:S,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 sm:w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:e.jsxs(N,{value:T(d),filters:{label:{value:null,matchMode:"contains"},value:{value:null,matchMode:"contains"}},filterDisplay:"row",paginator:!0,stripedRows:!0,rows:5,children:[e.jsx(j,{field:"label",showFilterMenu:!1,filter:!0,header:"Anahtar"}),e.jsx(j,{field:"value",showFilterMenu:!1,filter:!0,header:"Değer"})]})})]})]})})};export{pe as default};
