import{r as o,L as j,j as e,Y as b,B as h,y as w}from"./app-Q7AXU0aI.js";import{L as m,s as S,f as v,r as z,i as N,M as A,b as C,c as k,P as B,a as M,j as O}from"./ActiveOrder-CRyMwc2f.js";import{P as L,M as H}from"./PageContainer-BIYmXk4n.js";import{T as E}from"./toast.esm-CfmbWQEZ.js";import{d as D,c as K}from"./globalHelper-DmSEk4ia.js";import"./index.esm-De60uoIs.js";import"./sidebar.esm-DXtzmneN.js";import"./car-BnQ5UupV.js";import"./PersonalInformation-BeSBW7zC.js";import"./inputtext.esm-DYxVi6bR.js";import"./inputmask.esm-DFOdfNHf.js";import"./message.esm-BdhDmTuC.js";import"./PersonalInformation-CbdU5Zyv.js";import"./styleclass.esm-D-qKL6b3.js";import"./inputswitch.esm-BN_GMhiZ.js";const I=new m.Icon({iconUrl:S,iconSize:[32,32],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});new m.Icon({iconUrl:v,iconSize:[32,32],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});new m.Icon({iconUrl:z,iconSize:[16,16],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});const ee=({auth:d,csrfToken:c,orderId:u,courierIsTransporting:x=!1})=>{const[a,f]=o.useState(null),[P,l]=o.useState(!0),t=o.useRef(null),g=()=>{l(!0),D(u,c).then(r=>{var s;r.status?f(r.order):(s=t.current)==null||s.show({summary:"Hata",detail:r.message,severity:"error"})}).catch(r=>{var s;console.error(r),(s=t.current)==null||s.show({summary:"Hata",detail:"Bir Hata Oluştu",severity:"error"})}).finally(()=>l(!1))};o.useEffect(()=>{g()},[]),o.useState([]),o.useState(!1);const{setBreadcrumbs:y}=o.useContext(j);return o.useEffect(()=>{y(r=>[...r,{labels:["Yeni Siparişler","Siparişi Görüntüle"],to:window.location.href}])},[]),e.jsx(L,{auth:d,csrfToken:c,courierIsTransporting:x,children:e.jsxs(H,{children:[e.jsx(E,{ref:t}),e.jsx(b,{title:"Siparişi İncele"}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-900 text-xl font-bold mb-2 block",children:"Siparişi Al"}),e.jsx(h,{label:"Kabul Et",severity:"success",onClick:r=>{N({header:"Bu Siparişi Almak İstediğinize Emin misiniz ?",message:"Onayladıktan Sonra Konumunuz İzlenmeye Başlayacaktır",icon:"pi pi-info-circle",acceptClassName:"p-button-success",draggable:!1,rejectLabel:"Vazgeç",accept(){l(!0),K(t.current).then(s=>{O(u,s.latitude,s.longitude,c).then(i=>{var n,p;i.status?((n=t.current)==null||n.show({severity:"success",summary:"Başarılı",detail:i.message}),w.reload()):(p=t.current)==null||p.show({severity:"error",summary:"Hata",detail:i.message})}).catch(i=>{var n;console.log(i),l(!1),(n=t.current)==null||n.show({severity:"error",summary:"Hata",detail:"Bir Hata Oluştu"})}).finally(()=>l(!1))}).catch(s=>{var i;console.log(s),l(!1),(i=t.current)==null||i.show({severity:"error",summary:"Hata",detail:"Konum Bilginiz Alınamadı"})})}})}})]}),a!==null&&e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:"col-12",children:e.jsx("span",{className:"text-xl font-semibold",children:"İşletme Konumu"})}),e.jsx("div",{className:"col-12",children:e.jsxs(A,{center:[a.business.details.latitude,a.business.details.longitude],zoom:15,zoomControl:!0,attributionControl:!1,style:{height:"350px",borderRadius:"10px"},scrollWheelZoom:!1,children:[e.jsx(C,{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),e.jsx(k,{position:[a.business.details.latitude,a.business.details.longitude],icon:I,children:e.jsxs(B,{children:[e.jsx("span",{className:"font-semibold flex justify-content-center text-lg",children:"İşletme Konumu"}),e.jsx(h,{label:"Google Maps'te Aç",size:"small",icon:"pi pi-external-link",severity:"help",className:"w-full mt-2",onClick:()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${a.business.details.latitude},${a.business.details.longitude}`,"_blank")}})]})})]})})]})}),e.jsx("div",{className:"card",children:a!==null&&e.jsx(M,{orderId:u,auth:d,csrfToken:c})})]})})};export{ee as default};
