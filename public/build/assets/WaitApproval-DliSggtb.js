import{r as D,b as de,u as ue,j as n,B as R,R as ee,Y as pe,a as me}from"./app-RB4L5HeC.js";import{P as he,M as fe}from"./PageContainer-DYVxY7D-.js";import{T as ge}from"./toast.esm-CRBGU4XJ.js";import{g as be,e as ve}from"./businesses-B8cWdWWF.js";import{D as se,C as te}from"./column.esm-BvbgoV4P.js";import{M as re}from"./message.esm-BEa4-Sjy.js";import{C as ye,T as we}from"./checkbox.esm-C22bWzf0.js";import{O as xe,D as le}from"./ActiveOrder-CRQ_tfr6.js";import{g as je,a as Ee}from"./globalHelper-CI6ox7ZK.js";import"./PersonalInformation-DgwUYLID.js";import"./inputtext.esm-Bx5zzKwk.js";import"./inputmask.esm-Bb2c1uh8.js";import"./car-BnQ5UupV.js";import"./PersonalInformation-DhQIT7R6.js";import"./styleclass.esm-_hJvuxpR.js";import"./sidebar.esm-C0m_hCns.js";import"./index.esm-C_3l1P-V.js";import"./inputswitch.esm-DXPEr3dx.js";import"./index.esm-BtrivXfl.js";var ie={exports:{}};(function(Q,V){(function(M,C){Q.exports=C(D)})(typeof self<"u"?self:de,function(M){return function(){var C={155:function(e){e.exports=M}},Y={};function v(e){var t=Y[e];if(t!==void 0)return t.exports;var l=Y[e]={exports:{}};return C[e](l,l.exports,v),l.exports}v.d=function(e,t){for(var l in t)v.o(t,l)&&!v.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},v.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},v.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var _={};v.r(_),v.d(_,{useReactToPrint:function(){return U}});var H=v(155);function m({level:e="error",messages:t,suppressErrors:l=!1}){l||(e==="error"?console.error(t):e==="warning"?console.warn(t):e==="debug"&&console.debug(t))}function L(e,t){if(t||!e){const l=document.getElementById("printWindow");l&&document.body.removeChild(l)}}function A(e,t){const{documentTitle:l,onAfterPrint:u,onPrintError:h,preserveAfterPrint:f,print:j,suppressErrors:o}=t;setTimeout(()=>{var s,i;if(e.contentWindow)if(e.contentWindow.focus(),j)j(e).then(()=>u==null?void 0:u()).then(()=>L(f)).catch(d=>{h?h("print",d):m({messages:["An error was thrown by the specified `print` function"],suppressErrors:o})});else{if(e.contentWindow.print){const d=(i=(s=e.contentDocument)===null||s===void 0?void 0:s.title)!==null&&i!==void 0?i:"",E=e.ownerDocument.title;l&&(e.ownerDocument.title=l,e.contentDocument&&(e.contentDocument.title=l)),e.contentWindow.print(),l&&(e.ownerDocument.title=E,e.contentDocument&&(e.contentDocument.title=d))}else m({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:o});u==null||u(),L(f)}else m({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:o})},500)}function I(e){const t=[],l=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let u=l.nextNode();for(;u;)t.push(u),u=l.nextNode();return t}function y(e,t,l){const u=I(e),h=I(t);if(u.length===h.length)for(let f=0;f<u.length;f++){const j=u[f],o=h[f],s=j.shadowRoot;if(s!==null){const i=o.attachShadow({mode:s.mode});i.innerHTML=s.innerHTML,y(s,i,l)}}else m({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:l})}const K=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function G(e,t,l,u){var h,f,j;const{contentNode:o,clonedContentNode:s,clonedImgNodes:i,clonedVideoNodes:d,numResourcesToLoad:E,originalCanvasNodes:S}=l,{bodyClass:B,fonts:z,ignoreGlobalStyles:X,pageStyle:$,nonce:N,suppressErrors:W,copyShadowRoots:q}=u;e.onload=null;const g=e.contentDocument||((h=e.contentWindow)===null||h===void 0?void 0:h.document);if(g){const J=g.body.appendChild(s);q&&y(o,J,!!W),z&&(!((f=e.contentDocument)===null||f===void 0)&&f.fonts&&(!((j=e.contentWindow)===null||j===void 0)&&j.FontFace)?z.forEach(a=>{const r=new FontFace(a.family,a.source,{weight:a.weight,style:a.style});e.contentDocument.fonts.add(r),r.loaded.then(()=>{t(r)}).catch(w=>{t(r,["Failed loading the font:",r,"Load error:",w])})}):(z.forEach(a=>t(a)),m({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:W})));const p=$??K,P=g.createElement("style");N&&(P.setAttribute("nonce",N),g.head.setAttribute("nonce",N)),P.appendChild(g.createTextNode(p)),g.head.appendChild(P),B&&g.body.classList.add(...B.split(" "));const Z=g.querySelectorAll("canvas");for(let a=0;a<S.length;++a){const r=S[a],w=Z[a];if(w===void 0){m({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",r],suppressErrors:W});continue}const c=w.getContext("2d");c&&c.drawImage(r,0,0)}for(let a=0;a<i.length;a++){const r=i[a],w=r.getAttribute("src");if(w){const c=new Image;c.onload=()=>t(r),c.onerror=(b,T,O,x,k)=>t(r,["Error loading <img>",r,"Error",k]),c.src=w}else t(r,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',r])}for(let a=0;a<d.length;a++){const r=d[a];r.preload="auto";const w=r.getAttribute("poster");if(w){const c=new Image;c.onload=()=>t(r),c.onerror=(b,T,O,x,k)=>t(r,["Error loading video poster",w,"for video",r,"Error:",k]),c.src=w}else r.readyState>=2?t(r):(r.onloadeddata=()=>t(r),r.onerror=(c,b,T,O,x)=>t(r,["Error loading video",r,"Error",x]),r.onstalled=()=>t(r,["Loading video stalled, skipping",r]))}const ne="select",oe=o.querySelectorAll(ne),ae=g.querySelectorAll(ne);for(let a=0;a<oe.length;a++)ae[a].value=oe[a].value;if(!X){const a=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let r=0,w=a.length;r<w;++r){const c=a[r];if(c.tagName.toLowerCase()==="style"){const b=g.createElement(c.tagName),T=c.sheet;if(T){let O="";try{const x=T.cssRules.length;for(let k=0;k<x;++k)typeof T.cssRules[k].cssText=="string"&&(O+=`${T.cssRules[k].cssText}\r
`)}catch(x){m({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",c,`Original error: ${x==null?void 0:x.message}`],level:"warning"})}b.setAttribute("id",`react-to-print-${r}`),N&&b.setAttribute("nonce",N),b.appendChild(g.createTextNode(O)),g.head.appendChild(b)}}else if(c.getAttribute("href"))if(c.hasAttribute("disabled"))m({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",c],level:"warning"}),t(c);else{const b=g.createElement(c.tagName);for(let T=0,O=c.attributes.length;T<O;++T){const x=c.attributes[T];x&&b.setAttribute(x.nodeName,x.nodeValue||"")}b.onload=()=>t(b),b.onerror=(T,O,x,k,ce)=>t(b,["Failed to load",b,"Error:",ce]),N&&b.setAttribute("nonce",N),g.head.appendChild(b)}else m({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",c],level:"warning"}),t(c)}}}E===0&&A(e,u)}function F(e,t,l,u){e.onload=()=>G(e,t,l,u),document.body.appendChild(e)}function U(e){const{contentRef:t,fonts:l,ignoreGlobalStyles:u,onBeforePrint:h,onPrintError:f,preserveAfterPrint:j,suppressErrors:o}=e;return(0,H.useCallback)(i=>{L(j,!0);const d=function({contentRef:p,optionalContent:P,suppressErrors:Z}){return P&&(p&&m({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof P=="function")?P():p?p.current:void m({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Z})}({contentRef:t,optionalContent:i,suppressErrors:o});if(!d)return void m({messages:["There is nothing to print"],suppressErrors:o});const E=d.cloneNode(!0),S=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),B=E.querySelectorAll("img"),z=E.querySelectorAll("video"),X=l?l.length:0,$=(u?0:S.length)+B.length+z.length+X,N=[],W=[],q=function(){const p=document.createElement("iframe");return p.width=`${document.documentElement.clientWidth}px`,p.height=`${document.documentElement.clientHeight}px`,p.style.position="absolute",p.style.top=`-${document.documentElement.clientHeight+100}px`,p.style.left=`-${document.documentElement.clientWidth+100}px`,p.id="printWindow",p.srcdoc="<!DOCTYPE html>",p}(),g=(p,P)=>{N.includes(p)?m({level:"debug",messages:["Tried to mark a resource that has already been handled",p],suppressErrors:o}):(P?(m({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...P],suppressErrors:o}),W.push(p)):N.push(p),N.length+W.length===$&&A(q,e))},J={contentNode:d,clonedContentNode:E,clonedImgNodes:B,clonedVideoNodes:z,numResourcesToLoad:$,originalCanvasNodes:d.querySelectorAll("canvas")};h?h().then(()=>F(q,g,J,e)).catch(p=>{f==null||f("onBeforePrint",p)}):F(q,g,J,e)},[e])}return _}()})})(ie);var Te=ie.exports;const $e=({auth:Q,csrfToken:V})=>{const[M,C]=D.useState(!0),[Y,v]=D.useState(!1),[_,H]=D.useState(!1),[m,L]=D.useState([]),[A,I]=D.useState(null),[y,K]=ue(["name","email","phone","details_button","created_at","actions"],"adminBusinessesWaitApprovalDetailsColumns"),[G,F]=D.useState(null);D.useEffect(()=>{be("waitApprovals",V).then(o=>{o.status?(L(o.details),C(!1),F(null)):(F(o.message),C(!1))}).catch(o=>{F(o.message),C(!1)})},[]);const U=(o,s)=>{me({target:o.currentTarget,message:"İşletme Bilgileri Onaylanacaktır. Onaylamak istediğinize emin misiniz?",acceptLabel:"Onayla",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){C(!0),ve(s,V).then(({status:i,message:d})=>{var E,S;i?(L(m.filter(B=>B.business.id!==s)),(E=h.current)==null||E.show({severity:"success",summary:"Başarılı",detail:d})):(S=h.current)==null||S.show({severity:"error",summary:"Hata",detail:d})}).catch(i=>{var d;(d=h.current)==null||d.show({severity:"error",summary:"Hata",detail:i.message})}).finally(()=>{C(!1),v(!1)})}})};let e=[{field:"name",header:"Adı Soyadı",hidden:!y.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!y.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!y.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"details_button",header:"İşletme Bilgileri",hidden:!y.includes("details_button"),align:"center",body:o=>n.jsx(n.Fragment,{children:n.jsx(R,{icon:"pi pi-file",tooltip:"İşletme Bilgileri",severity:"info",size:"small",tooltipOptions:{position:"top"},onClick:s=>{I(o),v(!0)}})})},{field:"updated_at",header:"Bilgilerin Güncellenme Tarihi",hidden:!y.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Bilgilerin Güncellenme Tarihine Göre",filterType:"date",body:o=>n.jsx("span",{children:new Date(o.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!y.includes("actions"),body:o=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(R,{icon:"pi pi-print",tooltip:"İşletme Bilgilerini Yazdır",severity:"help",size:"small",tooltipOptions:{position:"top"},onClick:s=>{I(o),H(!0)}}),n.jsx(R,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:s=>{U(s,o.business.id)}})]})}];const t=ee.useRef(null),l=o=>{let s=[];return o===null||Object.entries(o).forEach(([i,d])=>{typeof d=="string"&&(i!=="courier"||i!=="status"||i!=="completed"||i!=="approved"||i!=="latitude"||i!=="longitude"||i!=="id"||i!=="courier_id"||i!=="created_at"||i!=="updated_at")&&s.push({label:je(String(i)),value:Ee(String(i),String(d))})}),s},u=()=>n.jsx(n.Fragment,{children:n.jsx(we,{end:n.jsx(n.Fragment,{children:n.jsx(R,{icon:"pi pi-bars",onClick:o=>{var s;(s=t.current)==null||s.toggle(o)}})})})}),h=ee.useRef(null),f=ee.useRef(null),j=Te.useReactToPrint({contentRef:f});return n.jsx(he,{auth:Q,csrfToken:V,children:n.jsxs(fe,{children:[n.jsx(pe,{title:"Onay Bekleyen İşletmeler"}),n.jsx(ge,{ref:h}),n.jsxs(xe,{ref:t,showCloseIcon:!0,style:{width:"300px"},children:[n.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:n.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",y.length,")"]})}),n.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:e.map((o,s)=>{if(o.selectionMode==="multiple")return null;let i=o.header,d=o.field;return n.jsxs("div",{className:"flex align-items-center",children:[n.jsx(ye,{inputId:`column${s}`,checked:y.includes(d),onChange:E=>{E.checked?K([...y,d]):K(y.filter(S=>S!==d))}}),n.jsx("label",{htmlFor:`column${s}`,className:"ml-2",children:i})]},s)})})]}),n.jsxs("div",{className:"card",children:[n.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Onay Bekleyen İşletmeler (İşletme Bilgileri Onay Ekranı)"}),G!==null&&n.jsx(re,{className:"w-full",severity:"error",text:G}),!M&&m.length===0&&n.jsx(re,{className:"w-full",severity:"info",text:"Onay bekleyen İşletme bulunamadı."}),n.jsx(se,{hidden:!M&&m.length===0||G!==null,loading:M,value:m,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:u,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},emptyMessage:"İşletme bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:e.map((o,s)=>n.jsx(te,{...o},s))}),n.jsx(le,{header:"İşletme Bilgileri",draggable:!1,footer:n.jsxs("div",{className:"gap-2",children:[n.jsx(R,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>v(!1)}),n.jsx(R,{size:"small",icon:"pi pi-check-circle",label:"Bilgileri Onayla",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:o=>{var s;U(o,(s=A==null?void 0:A.business)==null?void 0:s.id)}})]}),onHide:()=>v(!1),visible:Y,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:n.jsxs(se,{value:l(A),filters:{label:{value:null,matchMode:"contains"},value:{value:null,matchMode:"contains"}},filterDisplay:"row",paginator:!0,stripedRows:!0,rows:5,children:[n.jsx(te,{field:"label",showFilterMenu:!1,filter:!0,header:"Anahtar"}),n.jsx(te,{field:"value",showFilterMenu:!1,filter:!0,header:"Değer"})]})}),n.jsx(le,{header:"İşletme Bilgilerini Yazdır",draggable:!1,footer:n.jsxs("div",{className:"gap-2",children:[n.jsx(R,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>H(!1)}),n.jsx(R,{size:"small",icon:"pi pi-print",label:"Yazdır",severity:"success",tooltip:"Yazdır",tooltipOptions:{position:"top"},onClick:()=>{j()}})]}),onHide:()=>H(!1),visible:_,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:n.jsx("div",{children:n.jsx("dl",{ref:f,className:"tw-max-w-md tw-text-gray-900 tw-divide-y tw-divide-gray-300 tw-print:tw-text-black tw-print:tw-divide-gray-400",children:l(A).map((o,s)=>n.jsxs("div",{className:"tw-flex tw-flex-col tw-pb-3 tw-mb-1 tw-print:tw-pb-2 tw-print:tw-mb-2 tw-border-b tw-border-gray-300",children:[n.jsx("dt",{className:"tw-mb-1 tw-text-gray-600 tw-print:tw-text-gray-800 tw-text-sm",children:o.label}),n.jsx("dd",{className:"tw-font-semibold tw-m-0 tw-text-base tw-print:tw-font-bold",children:o.value})]},s))})})})]})]})})};export{$e as default};
