import{W as ar}from"./app-Q7AXU0aI.js";var Ve={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0-rc2
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(w,_){(function(d,S){w.exports=S()})(window,function(){return function(x){var d={};function S(v){if(d[v])return d[v].exports;var u=d[v]={i:v,l:!1,exports:{}};return x[v].call(u.exports,u,u.exports,S),u.l=!0,u.exports}return S.m=x,S.c=d,S.d=function(v,u,I){S.o(v,u)||Object.defineProperty(v,u,{enumerable:!0,get:I})},S.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},S.t=function(v,u){if(u&1&&(v=S(v)),u&8||u&4&&typeof v=="object"&&v&&v.__esModule)return v;var I=Object.create(null);if(S.r(I),Object.defineProperty(I,"default",{enumerable:!0,value:v}),u&2&&typeof v!="string")for(var b in v)S.d(I,b,(function(J){return v[J]}).bind(null,b));return I},S.n=function(v){var u=v&&v.__esModule?function(){return v.default}:function(){return v};return S.d(u,"a",u),u},S.o=function(v,u){return Object.prototype.hasOwnProperty.call(v,u)},S.p="",S(S.s=2)}([function(x,d,S){var v=this&&this.__extends||function(){var l=function(a,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var j in E)E.hasOwnProperty(j)&&(g[j]=E[j])},l(a,c)};return function(a,c){l(a,c);function g(){this.constructor=a}a.prototype=c===null?Object.create(c):(g.prototype=c.prototype,new g)}}();Object.defineProperty(d,"__esModule",{value:!0});var u=256,I=function(){function l(a){a===void 0&&(a="="),this._paddingCharacter=a}return l.prototype.encodedLength=function(a){return this._paddingCharacter?(a+2)/3*4|0:(a*8+5)/6|0},l.prototype.encode=function(a){for(var c="",g=0;g<a.length-2;g+=3){var E=a[g]<<16|a[g+1]<<8|a[g+2];c+=this._encodeByte(E>>>3*6&63),c+=this._encodeByte(E>>>2*6&63),c+=this._encodeByte(E>>>1*6&63),c+=this._encodeByte(E>>>0*6&63)}var j=a.length-g;if(j>0){var E=a[g]<<16|(j===2?a[g+1]<<8:0);c+=this._encodeByte(E>>>3*6&63),c+=this._encodeByte(E>>>2*6&63),j===2?c+=this._encodeByte(E>>>1*6&63):c+=this._paddingCharacter||"",c+=this._paddingCharacter||""}return c},l.prototype.maxDecodedLength=function(a){return this._paddingCharacter?a/4*3|0:(a*6+7)/8|0},l.prototype.decodedLength=function(a){return this.maxDecodedLength(a.length-this._getPaddingLength(a))},l.prototype.decode=function(a){if(a.length===0)return new Uint8Array(0);for(var c=this._getPaddingLength(a),g=a.length-c,E=new Uint8Array(this.maxDecodedLength(g)),j=0,N=0,U=0,M=0,H=0,B=0,$=0;N<g-4;N+=4)M=this._decodeChar(a.charCodeAt(N+0)),H=this._decodeChar(a.charCodeAt(N+1)),B=this._decodeChar(a.charCodeAt(N+2)),$=this._decodeChar(a.charCodeAt(N+3)),E[j++]=M<<2|H>>>4,E[j++]=H<<4|B>>>2,E[j++]=B<<6|$,U|=M&u,U|=H&u,U|=B&u,U|=$&u;if(N<g-1&&(M=this._decodeChar(a.charCodeAt(N)),H=this._decodeChar(a.charCodeAt(N+1)),E[j++]=M<<2|H>>>4,U|=M&u,U|=H&u),N<g-2&&(B=this._decodeChar(a.charCodeAt(N+2)),E[j++]=H<<4|B>>>2,U|=B&u),N<g-3&&($=this._decodeChar(a.charCodeAt(N+3)),E[j++]=B<<6|$,U|=$&u),U!==0)throw new Error("Base64Coder: incorrect characters for decoding");return E},l.prototype._encodeByte=function(a){var c=a;return c+=65,c+=25-a>>>8&6,c+=51-a>>>8&-75,c+=61-a>>>8&-15,c+=62-a>>>8&3,String.fromCharCode(c)},l.prototype._decodeChar=function(a){var c=u;return c+=(42-a&a-44)>>>8&-u+a-43+62,c+=(46-a&a-48)>>>8&-u+a-47+63,c+=(47-a&a-58)>>>8&-u+a-48+52,c+=(64-a&a-91)>>>8&-u+a-65+0,c+=(96-a&a-123)>>>8&-u+a-97+26,c},l.prototype._getPaddingLength=function(a){var c=0;if(this._paddingCharacter){for(var g=a.length-1;g>=0&&a[g]===this._paddingCharacter;g--)c++;if(a.length<4||c>2)throw new Error("Base64Coder: incorrect padding")}return c},l}();d.Coder=I;var b=new I;function J(l){return b.encode(l)}d.encode=J;function A(l){return b.decode(l)}d.decode=A;var P=function(l){v(a,l);function a(){return l!==null&&l.apply(this,arguments)||this}return a.prototype._encodeByte=function(c){var g=c;return g+=65,g+=25-c>>>8&6,g+=51-c>>>8&-75,g+=61-c>>>8&-13,g+=62-c>>>8&49,String.fromCharCode(g)},a.prototype._decodeChar=function(c){var g=u;return g+=(44-c&c-46)>>>8&-u+c-45+62,g+=(94-c&c-96)>>>8&-u+c-95+63,g+=(47-c&c-58)>>>8&-u+c-48+52,g+=(64-c&c-91)>>>8&-u+c-65+0,g+=(96-c&c-123)>>>8&-u+c-97+26,g},a}(I);d.URLSafeCoder=P;var m=new P;function y(l){return m.encode(l)}d.encodeURLSafe=y;function C(l){return m.decode(l)}d.decodeURLSafe=C,d.encodedLength=function(l){return b.encodedLength(l)},d.maxDecodedLength=function(l){return b.maxDecodedLength(l)},d.decodedLength=function(l){return b.decodedLength(l)}},function(x,d,S){Object.defineProperty(d,"__esModule",{value:!0});var v="utf8: invalid string",u="utf8: invalid source encoding";function I(A){for(var P=new Uint8Array(b(A)),m=0,y=0;y<A.length;y++){var C=A.charCodeAt(y);C<128?P[m++]=C:C<2048?(P[m++]=192|C>>6,P[m++]=128|C&63):C<55296?(P[m++]=224|C>>12,P[m++]=128|C>>6&63,P[m++]=128|C&63):(y++,C=(C&1023)<<10,C|=A.charCodeAt(y)&1023,C+=65536,P[m++]=240|C>>18,P[m++]=128|C>>12&63,P[m++]=128|C>>6&63,P[m++]=128|C&63)}return P}d.encode=I;function b(A){for(var P=0,m=0;m<A.length;m++){var y=A.charCodeAt(m);if(y<128)P+=1;else if(y<2048)P+=2;else if(y<55296)P+=3;else if(y<=57343){if(m>=A.length-1)throw new Error(v);m++,P+=4}else throw new Error(v)}return P}d.encodedLength=b;function J(A){for(var P=[],m=0;m<A.length;m++){var y=A[m];if(y&128){var C=void 0;if(y<224){if(m>=A.length)throw new Error(u);var l=A[++m];if((l&192)!==128)throw new Error(u);y=(y&31)<<6|l&63,C=128}else if(y<240){if(m>=A.length-1)throw new Error(u);var l=A[++m],a=A[++m];if((l&192)!==128||(a&192)!==128)throw new Error(u);y=(y&15)<<12|(l&63)<<6|a&63,C=2048}else if(y<248){if(m>=A.length-2)throw new Error(u);var l=A[++m],a=A[++m],c=A[++m];if((l&192)!==128||(a&192)!==128||(c&192)!==128)throw new Error(u);y=(y&15)<<18|(l&63)<<12|(a&63)<<6|c&63,C=65536}else throw new Error(u);if(y<C||y>=55296&&y<=57343)throw new Error(u);if(y>=65536){if(y>1114111)throw new Error(u);y-=65536,P.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}P.push(String.fromCharCode(y))}return P.join("")}d.decode=J},function(x,d,S){x.exports=S(3).default},function(x,d,S){S.r(d);class v{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,r=this.prefix+t,i=this.name+"["+t+"]",s=!1,o=function(){s||(e.apply(null,arguments),s=!0)};return this[t]=o,{number:t,id:r,name:i,callback:o}}remove(e){delete this[e.number]}}var u=new v("_pusher_script_","Pusher.ScriptReceivers"),I={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},b=I;class J{constructor(e){this.options=e,this.receivers=e.receivers||u,this.loading={}}load(e,t,r){var i=this;if(i.loading[e]&&i.loading[e].length>0)i.loading[e].push(r);else{i.loading[e]=[r];var s=p.createScriptRequest(i.getPath(e,t)),o=i.receivers.create(function(h){if(i.receivers.remove(o),i.loading[e]){var f=i.loading[e];delete i.loading[e];for(var k=function(O){O||s.cleanup()},T=0;T<f.length;T++)f[T](h,k)}});s.send(o)}}getRoot(e){var t,r=p.getDocument().location.protocol;return e&&e.useTLS||r==="https:"?t=this.options.cdn_https:t=this.options.cdn_http,t.replace(/\/*$/,"")+"/"+this.options.version}getPath(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"}}var A=new v("_pusher_dependencies","Pusher.DependenciesReceivers"),P=new J({cdn_http:b.cdn_http,cdn_https:b.cdn_https,version:b.VERSION,suffix:b.dependency_suffix,receivers:A});const m={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var C={buildLogSuffix:function(n){const e="See:",t=m.urls[n];if(!t)return"";let r;return t.fullUrl?r=t.fullUrl:t.path&&(r=m.baseUrl+t.path),r?`${e} ${r}`:""}},l;(function(n){n.UserAuthentication="user-authentication",n.ChannelAuthorization="channel-authorization"})(l||(l={}));class a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class c extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class U extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class M extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class H extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}var $=function(n,e,t,r,i){const s=p.createXHR();s.open("POST",t.endpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var o in t.headers)s.setRequestHeader(o,t.headers[o]);if(t.headersProvider!=null){let h=t.headersProvider();for(var o in h)s.setRequestHeader(o,h[o])}return s.onreadystatechange=function(){if(s.readyState===4)if(s.status===200){let h,f=!1;try{h=JSON.parse(s.responseText),f=!0}catch{i(new H(200,`JSON returned from ${r.toString()} endpoint was invalid, yet status code was 200. Data was: ${s.responseText}`),null)}f&&i(null,h)}else{let h="";switch(r){case l.UserAuthentication:h=C.buildLogSuffix("authenticationEndpoint");break;case l.ChannelAuthorization:h=`Clients must be authorized to join private or presence channels. ${C.buildLogSuffix("authorizationEndpoint")}`;break}i(new H(s.status,`Unable to retrieve auth string from ${r.toString()} endpoint - received status: ${s.status} from ${t.endpoint}. ${h}`),null)}},s.send(e),s};function Ye(n){return tt(Ze(n))}var Q=String.fromCharCode,ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qe=function(n){var e=n.charCodeAt(0);return e<128?n:e<2048?Q(192|e>>>6)+Q(128|e&63):Q(224|e>>>12&15)+Q(128|e>>>6&63)+Q(128|e&63)},Ze=function(n){return n.replace(/[^\x00-\x7F]/g,Qe)},et=function(n){var e=[0,2,1][n.length%3],t=n.charCodeAt(0)<<16|(n.length>1?n.charCodeAt(1):0)<<8|(n.length>2?n.charCodeAt(2):0),r=[ne.charAt(t>>>18),ne.charAt(t>>>12&63),e>=2?"=":ne.charAt(t>>>6&63),e>=1?"=":ne.charAt(t&63)];return r.join("")},tt=window.btoa||function(n){return n.replace(/[\s\S]{1,3}/g,et)};class nt{constructor(e,t,r,i){this.clear=t,this.timer=e(()=>{this.timer&&(this.timer=i(this.timer))},r)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var we=nt;function rt(n){window.clearTimeout(n)}function it(n){window.clearInterval(n)}class K extends we{constructor(e,t){super(setTimeout,rt,e,function(r){return t(),null})}}class st extends we{constructor(e,t){super(setInterval,it,e,function(r){return t(),r})}}var ot={now(){return Date.now?Date.now():new Date().valueOf()},defer(n){return new K(0,n)},method(n,...e){var t=Array.prototype.slice.call(arguments,1);return function(r){return r[n].apply(r,t.concat(arguments))}}},D=ot;function z(n,...e){for(var t=0;t<e.length;t++){var r=e[t];for(var i in r)r[i]&&r[i].constructor&&r[i].constructor===Object?n[i]=z(n[i]||{},r[i]):n[i]=r[i]}return n}function at(){for(var n=["Pusher"],e=0;e<arguments.length;e++)typeof arguments[e]=="string"?n.push(arguments[e]):n.push(re(arguments[e]));return n.join(" : ")}function Se(n,e){var t=Array.prototype.indexOf;if(n===null)return-1;if(t&&n.indexOf===t)return n.indexOf(e);for(var r=0,i=n.length;r<i;r++)if(n[r]===e)return r;return-1}function q(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(n[t],t,n)}function ke(n){var e=[];return q(n,function(t,r){e.push(r)}),e}function ct(n){var e=[];return q(n,function(t){e.push(t)}),e}function Z(n,e,t){for(var r=0;r<n.length;r++)e.call(t||window,n[r],r,n)}function Ce(n,e){for(var t=[],r=0;r<n.length;r++)t.push(e(n[r],r,n,t));return t}function ht(n,e){var t={};return q(n,function(r,i){t[i]=e(r)}),t}function Te(n,e){e=e||function(i){return!!i};for(var t=[],r=0;r<n.length;r++)e(n[r],r,n,t)&&t.push(n[r]);return t}function xe(n,e){var t={};return q(n,function(r,i){(e&&e(r,i,n,t)||r)&&(t[i]=r)}),t}function ut(n){var e=[];return q(n,function(t,r){e.push([r,t])}),e}function Pe(n,e){for(var t=0;t<n.length;t++)if(e(n[t],t,n))return!0;return!1}function lt(n,e){for(var t=0;t<n.length;t++)if(!e(n[t],t,n))return!1;return!0}function dt(n){return ht(n,function(e){return typeof e=="object"&&(e=re(e)),encodeURIComponent(Ye(e.toString()))})}function ft(n){var e=xe(n,function(r){return r!==void 0}),t=Ce(ut(dt(e)),D.method("join","=")).join("&");return t}function pt(n){var e=[],t=[];return function r(i,s){var o,h,f;switch(typeof i){case"object":if(!i)return null;for(o=0;o<e.length;o+=1)if(e[o]===i)return{$ref:t[o]};if(e.push(i),t.push(s),Object.prototype.toString.apply(i)==="[object Array]")for(f=[],o=0;o<i.length;o+=1)f[o]=r(i[o],s+"["+o+"]");else{f={};for(h in i)Object.prototype.hasOwnProperty.call(i,h)&&(f[h]=r(i[h],s+"["+JSON.stringify(h)+"]"))}return f;case"number":case"string":case"boolean":return i}}(n,"$")}function re(n){try{return JSON.stringify(n)}catch{return JSON.stringify(pt(n))}}class gt{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var r=at.apply(this,arguments);be.log?be.log(r):be.logToConsole&&e.bind(this)(r)}}var L=new gt,vt=function(n,e,t,r,i){(t.headers!==void 0||t.headersProvider!=null)&&L.warn(`To send headers with the ${r.toString()} request, you must use AJAX, rather than JSONP.`);var s=n.nextAuthCallbackID.toString();n.nextAuthCallbackID++;var o=n.getDocument(),h=o.createElement("script");n.auth_callbacks[s]=function(T){i(null,T)};var f="Pusher.auth_callbacks['"+s+"']";h.src=t.endpoint+"?callback="+encodeURIComponent(f)+"&"+e;var k=o.getElementsByTagName("head")[0]||o.documentElement;k.insertBefore(h,k.firstChild)},mt=vt;class bt{constructor(e){this.src=e}send(e){var t=this,r="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(r)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){(t.script.readyState==="loaded"||t.script.readyState==="complete")&&e.callback(null)},t.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+r+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(t.script,i.firstChild),t.errorScript&&i.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class yt{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t=ft(this.data),r=this.url+"/"+e.number+"?"+t;this.request=p.createScriptRequest(r),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var _t=function(n,e){return function(t,r){var i="http"+(e?"s":"")+"://",s=i+(n.host||n.options.host)+n.options.path,o=p.createJSONPRequest(s,t),h=p.ScriptReceivers.create(function(f,k){u.remove(h),o.cleanup(),k&&k.host&&(n.host=k.host),r&&r(f,k)});o.send(h)}},wt={name:"jsonp",getAgent:_t},St=wt;function ce(n,e,t){var r=n+(e.useTLS?"s":""),i=e.useTLS?e.hostTLS:e.hostNonTLS;return r+"://"+i+t}function he(n,e){var t="/app/"+n,r="?protocol="+b.PROTOCOL+"&client=js&version="+b.VERSION+(e?"&"+e:"");return t+r}var kt={getInitial:function(n,e){var t=(e.httpPath||"")+he(n,"flash=false");return ce("ws",e,t)}},Ct={getInitial:function(n,e){var t=(e.httpPath||"/pusher")+he(n);return ce("http",e,t)}},Tt={getInitial:function(n,e){return ce("http",e,e.httpPath||"/pusher")},getPath:function(n,e){return he(n)}};class xt{constructor(){this._callbacks={}}get(e){return this._callbacks[ue(e)]}add(e,t,r){var i=ue(e);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:r})}remove(e,t,r){if(!e&&!t&&!r){this._callbacks={};return}var i=e?[ue(e)]:ke(this._callbacks);t||r?this.removeCallback(i,t,r):this.removeAllCallbacks(i)}removeCallback(e,t,r){Z(e,function(i){this._callbacks[i]=Te(this._callbacks[i]||[],function(s){return t&&t!==s.fn||r&&r!==s.context}),this._callbacks[i].length===0&&delete this._callbacks[i]},this)}removeAllCallbacks(e){Z(e,function(t){delete this._callbacks[t]},this)}}function ue(n){return"_"+n}class F{constructor(e){this.callbacks=new xt,this.global_callbacks=[],this.failThrough=e}bind(e,t,r){return this.callbacks.add(e,t,r),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,r){return this.callbacks.remove(e,t,r),this}unbind_global(e){return e?(this.global_callbacks=Te(this.global_callbacks||[],t=>t!==e),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,r){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](e,t);var s=this.callbacks.get(e),o=[];if(r?o.push(t,r):t&&o.push(t),s&&s.length>0)for(var i=0;i<s.length;i++)s[i].fn.apply(s[i].context||window,o);else this.failThrough&&this.failThrough(e,t);return this}}class Pt extends F{constructor(e,t,r,i,s){super(),this.initialize=p.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=r,this.key=i,this.options=s,this.state="new",this.timeline=s.timeline,this.activityTimeout=s.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(t){return D.defer(()=>{this.onError(t),this.changeState("closed")}),!1}return this.bindListeners(),L.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(e){return this.state==="open"?(D.defer(()=>{this.socket&&this.socket.send(e)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return z({cid:this.id},e)}}class Y{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,r,i){return new Pt(this.hooks,e,t,r,i)}}var At=new Y({urls:kt,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!p.getWebSocketAPI()},isSupported:function(){return!!p.getWebSocketAPI()},getSocket:function(n){return p.createWebSocket(n)}}),Ae={urls:Ct,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Ee=z({getSocket:function(n){return p.HTTPFactory.createStreamingSocket(n)}},Ae),Le=z({getSocket:function(n){return p.HTTPFactory.createPollingSocket(n)}},Ae),Oe={isSupported:function(){return p.isXHRSupported()}},Et=new Y(z({},Ee,Oe)),Lt=new Y(z({},Le,Oe)),Ot={ws:At,xhr_streaming:Et,xhr_polling:Lt},ie=Ot,Rt=new Y({file:"sockjs",urls:Tt,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(n,e){return new window.SockJS(n,null,{js_path:P.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(n,e){n.send(JSON.stringify({path:e}))}}),Re={isSupported:function(n){var e=p.isXDRSupported(n.useTLS);return e}},It=new Y(z({},Ee,Re)),jt=new Y(z({},Le,Re));ie.xdr_streaming=It,ie.xdr_polling=jt,ie.sockjs=Rt;var Nt=ie;class Dt extends F{constructor(){super();var e=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var zt=new Dt;class Ht{constructor(e,t,r){this.manager=e,this.transport=t,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,r,i){i=z({},i,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(e,t,r,i),o=null,h=function(){s.unbind("open",h),s.bind("closed",f),o=D.now()},f=k=>{if(s.unbind("closed",f),k.code===1002||k.code===1003)this.manager.reportDeath();else if(!k.wasClean&&o){var T=D.now()-o;T<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(T/2,this.minPingDelay))}};return s.bind("open",h),s}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}const Ie={decodeMessage:function(n){try{var e=JSON.parse(n.data),t=e.data;if(typeof t=="string")try{t=JSON.parse(e.data)}catch{}var r={event:e.event,channel:e.channel,data:t};return e.user_id&&(r.user_id=e.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:n.data}}},encodeMessage:function(n){return JSON.stringify(n)},processHandshake:function(n){var e=Ie.decodeMessage(n);if(e.event==="pusher:connection_established"){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:e.data.activity_timeout*1e3}}else{if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"}},getCloseAction:function(n){return n.code<4e3?n.code>=1002&&n.code<=1004?"backoff":null:n.code===4e3?"tls_only":n.code<4100?"refused":n.code<4200?"backoff":n.code<4300?"retry":"refused"},getCloseError:function(n){return n.code!==1e3&&n.code!==1001?{type:"PusherError",data:{code:n.code,message:n.reason||n.message}}:null}};var W=Ie;class Ut extends F{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,r){var i={event:e,data:t};return r&&(i.channel=r),L.debug("Event sent",i),this.send(W.encodeMessage(i))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:r=>{var i;try{i=W.decodeMessage(r)}catch(s){this.emit("error",{type:"MessageParseError",error:s,data:r.data})}if(i!==void 0){switch(L.debug("Event recd",i),i.event){case"pusher:error":this.emit("error",{type:"PusherError",data:i.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",i)}},activity:()=>{this.emit("activity")},error:r=>{this.emit("error",r)},closed:r=>{t(),r&&r.code&&this.handleCloseEvent(r),this.transport=null,this.emit("closed")}},t=()=>{q(e,(r,i)=>{this.transport.unbind(i,r)})};q(e,(r,i)=>{this.transport.bind(i,r)})}handleCloseEvent(e){var t=W.getCloseAction(e),r=W.getCloseError(e);r&&this.emit("error",r),t&&this.emit(t,{action:t,error:r})}}class Mt{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{this.unbindListeners();var t;try{t=W.processHandshake(e)}catch(r){this.finish("error",{error:r}),this.transport.close();return}t.action==="connected"?this.finish("connected",{connection:new Ut(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=W.getCloseAction(e)||"backoff",r=W.getCloseError(e);this.finish(t,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,t){this.callback(z({transport:this.transport,action:e},t))}}class Bt{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(p.TimelineTransport.getAgent(this,e),t)}}class le extends F{constructor(e,t){super(function(r,i){L.debug("No callbacks on "+e+" for "+r)}),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:""})}trigger(e,t){if(e.indexOf("client-")!==0)throw new a("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var r=C.buildLogSuffix("triggeringClientEvents");L.warn(`Client event triggered before channel 'subscription_succeeded' event . ${r}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,r=e.data;if(t==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(e);else if(t==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(e);else if(t.indexOf("pusher_internal:")!==0){var i={};this.emit(t,r,i)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,t)=>{e?(this.subscriptionPending=!1,L.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof H?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:t.auth,channel_data:t.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class de extends le{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class qt{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){q(this.members,(t,r)=>{e(this.get(r))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Ft=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function h(T){try{k(r.next(T))}catch(O){o(O)}}function f(T){try{k(r.throw(T))}catch(O){o(O)}}function k(T){T.done?s(T.value):i(T.value).then(h,f)}k((r=r.apply(n,e||[])).next())})};class Xt extends de{constructor(e,t){super(e,t),this.members=new qt}authorize(e,t){super.authorize(e,(r,i)=>Ft(this,void 0,void 0,function*(){if(!r)if(i=i,i.channel_data!=null){var s=JSON.parse(i.channel_data);this.members.setMyID(s.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let o=C.buildLogSuffix("authorizationEndpoint");L.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${o}, or the user should be signed in.`),t("Invalid auth response");return}t(r,i)}))}handleEvent(e){var t=e.event;if(t.indexOf("pusher_internal:")===0)this.handleInternalEvent(e);else{var r=e.data,i={};e.user_id&&(i.user_id=e.user_id),this.emit(t,r,i)}}handleInternalEvent(e){var t=e.event,r=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var i=this.members.addMember(r);this.emit("pusher:member_added",i);break;case"pusher_internal:member_removed":var s=this.members.removeMember(r);s&&this.emit("pusher:member_removed",s);break}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var $t=S(1),fe=S(0);class Jt extends de{constructor(e,t,r){super(e,t),this.key=null,this.nacl=r}authorize(e,t){super.authorize(e,(r,i)=>{if(r){t(r,i);return}let s=i.shared_secret;if(!s){t(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(fe.decode)(s),delete i.shared_secret,t(null,i)})}trigger(e,t){throw new N("Client events are not currently supported for encrypted channels")}handleEvent(e){var t=e.event,r=e.data;if(t.indexOf("pusher_internal:")===0||t.indexOf("pusher:")===0){super.handleEvent(e);return}this.handleEncryptedEvent(t,r)}handleEncryptedEvent(e,t){if(!this.key){L.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!t.ciphertext||!t.nonce){L.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);return}let r=Object(fe.decode)(t.ciphertext);if(r.length<this.nacl.secretbox.overheadLength){L.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${r.length}`);return}let i=Object(fe.decode)(t.nonce);if(i.length<this.nacl.secretbox.nonceLength){L.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${i.length}`);return}let s=this.nacl.secretbox.open(r,i,this.key);if(s===null){L.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(o,h)=>{if(o){L.error(`Failed to make a request to the authEndpoint: ${h}. Unable to fetch new key, so dropping encrypted event`);return}if(s=this.nacl.secretbox.open(r,i,this.key),s===null){L.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(e,this.getDataToEmit(s))});return}this.emit(e,this.getDataToEmit(s))}getDataToEmit(e){let t=Object($t.decode)(e);try{return JSON.parse(t)}catch{return t}}}class Kt extends F{constructor(e,t){super(),this.state="initialized",this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var r=p.getNetwork();r.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),r.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(e){this.key=e,this.updateStrategy(),this.retryIn(0)}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(e){return this.connection?this.connection.send(e):!1}send_event(e,t,r){return this.connection?this.connection.send_event(e,t,r):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,r)=>{t?this.runner=this.strategy.connect(0,e):r.action==="error"?(this.emit("error",{type:"HandshakeError",error:r.error}),this.timeline.error({handshakeError:r.error})):(this.abortConnecting(),this.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var e=this.abandonConnection();e.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new K(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new K(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new K(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new K(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return z({},e,{message:t=>{this.resetActivityCheck(),this.emit("message",t)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:t=>{this.emit("error",t)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return z({},e,{connected:t=>{this.activityTimeout=Math.min(this.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(t.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=t=>r=>{r.error&&this.emit("error",{type:"WebSocketError",error:r.error}),t(r)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var r=this.state;if(this.state=e,r!==e){var i=e;i==="connected"&&(i+=" with new socket ID "+t.socket_id),L.debug("State changed",r+" -> "+i),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:r,current:e}),this.emit(e,t)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class Wt{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=Gt(e,t)),this.channels[e]}all(){return ct(this.channels)}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){q(this.channels,function(e){e.disconnect()})}}function Gt(n,e){if(n.indexOf("private-encrypted-")===0){if(e.config.nacl)return X.createEncryptedChannel(n,e,e.config.nacl);let t="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=C.buildLogSuffix("encryptedChannelSupport");throw new N(`${t}. ${r}`)}else{if(n.indexOf("private-")===0)return X.createPrivateChannel(n,e);if(n.indexOf("presence-")===0)return X.createPresenceChannel(n,e);if(n.indexOf("#")===0)throw new c('Cannot create a channel with name "'+n+'".');return X.createChannel(n,e)}}var Vt={createChannels(){return new Wt},createConnectionManager(n,e){return new Kt(n,e)},createChannel(n,e){return new le(n,e)},createPrivateChannel(n,e){return new de(n,e)},createPresenceChannel(n,e){return new Xt(n,e)},createEncryptedChannel(n,e,t){return new Jt(n,e,t)},createTimelineSender(n,e){return new Bt(n,e)},createHandshake(n,e){return new Mt(n,e)},createAssistantToTheTransportManager(n,e,t){return new Ht(n,e,t)}},X=Vt;class je{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return X.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class G{constructor(e,t){this.strategies=e,this.loop=!!t.loop,this.failFast=!!t.failFast,this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return Pe(this.strategies,D.method("isSupported"))}connect(e,t){var r=this.strategies,i=0,s=this.timeout,o=null,h=(f,k)=>{k?t(null,k):(i=i+1,this.loop&&(i=i%r.length),i<r.length?(s&&(s=s*2,this.timeoutLimit&&(s=Math.min(s,this.timeoutLimit))),o=this.tryStrategy(r[i],e,{timeout:s,failFast:this.failFast},h)):t(!0))};return o=this.tryStrategy(r[i],e,{timeout:s,failFast:this.failFast},h),{abort:function(){o.abort()},forceMinPriority:function(f){e=f,o&&o.forceMinPriority(f)}}}tryStrategy(e,t,r,i){var s=null,o=null;return r.timeout>0&&(s=new K(r.timeout,function(){o.abort(),i(!0)})),o=e.connect(t,function(h,f){h&&s&&s.isRunning()&&!r.failFast||(s&&s.ensureAborted(),i(h,f))}),{abort:function(){s&&s.ensureAborted(),o.abort()},forceMinPriority:function(h){o.forceMinPriority(h)}}}}class pe{constructor(e){this.strategies=e}isSupported(){return Pe(this.strategies,D.method("isSupported"))}connect(e,t){return Yt(this.strategies,e,function(r,i){return function(s,o){if(i[r].error=s,s){Qt(i)&&t(!0);return}Z(i,function(h){h.forceMinPriority(o.transport.priority)}),t(null,o)}})}}function Yt(n,e,t){var r=Ce(n,function(i,s,o,h){return i.connect(e,t(s,h))});return{abort:function(){Z(r,Zt)},forceMinPriority:function(i){Z(r,function(s){s.forceMinPriority(i)})}}}function Qt(n){return lt(n,function(e){return!!e.error})}function Zt(n){!n.error&&!n.aborted&&(n.abort(),n.aborted=!0)}class en{constructor(e,t,r){this.strategy=e,this.transports=t,this.ttl=r.ttl||1800*1e3,this.usingTLS=r.useTLS,this.timeline=r.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var r=this.usingTLS,i=tn(r),s=i&&i.cacheSkipCount?i.cacheSkipCount:0,o=[this.strategy];if(i&&i.timestamp+this.ttl>=D.now()){var h=this.transports[i.transport];h&&(["ws","wss"].includes(i.transport)||s>3?(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),o.push(new G([h],{timeout:i.latency*2+1e3,failFast:!0}))):s++)}var f=D.now(),k=o.pop().connect(e,function T(O,ae){O?(Ne(r),o.length>0?(f=D.now(),k=o.pop().connect(e,T)):t(O)):(nn(r,ae.transport.name,D.now()-f,s),t(null,ae))});return{abort:function(){k.abort()},forceMinPriority:function(T){e=T,k&&k.forceMinPriority(T)}}}}function ge(n){return"pusherTransport"+(n?"TLS":"NonTLS")}function tn(n){var e=p.getLocalStorage();if(e)try{var t=e[ge(n)];if(t)return JSON.parse(t)}catch{Ne(n)}return null}function nn(n,e,t,r){var i=p.getLocalStorage();if(i)try{i[ge(n)]=re({timestamp:D.now(),transport:e,latency:t,cacheSkipCount:r})}catch{}}function Ne(n){var e=p.getLocalStorage();if(e)try{delete e[ge(n)]}catch{}}class se{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var r=this.strategy,i,s=new K(this.options.delay,function(){i=r.connect(e,t)});return{abort:function(){s.ensureAborted(),i&&i.abort()},forceMinPriority:function(o){e=o,i&&i.forceMinPriority(o)}}}}class ee{constructor(e,t,r){this.test=e,this.trueBranch=t,this.falseBranch=r}isSupported(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()}connect(e,t){var r=this.test()?this.trueBranch:this.falseBranch;return r.connect(e,t)}}class rn{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var r=this.strategy.connect(e,function(i,s){s&&r.abort(),t(i,s)});return r}}function te(n){return function(){return n.isSupported()}}var sn=function(n,e,t){var r={};function i(We,rr,ir,sr,or){var Ge=t(n,We,rr,ir,sr,or);return r[We]=Ge,Ge}var s=Object.assign({},e,{hostNonTLS:n.wsHost+":"+n.wsPort,hostTLS:n.wsHost+":"+n.wssPort,httpPath:n.wsPath}),o=Object.assign({},s,{useTLS:!0}),h=Object.assign({},e,{hostNonTLS:n.httpHost+":"+n.httpPort,hostTLS:n.httpHost+":"+n.httpsPort,httpPath:n.httpPath}),f={loop:!0,timeout:15e3,timeoutLimit:6e4},k=new je({minPingDelay:1e4,maxPingDelay:n.activityTimeout}),T=new je({lives:2,minPingDelay:1e4,maxPingDelay:n.activityTimeout}),O=i("ws","ws",3,s,k),ae=i("wss","ws",3,o,k),Qn=i("sockjs","sockjs",1,h),qe=i("xhr_streaming","xhr_streaming",1,h,T),Zn=i("xdr_streaming","xdr_streaming",1,h,T),Fe=i("xhr_polling","xhr_polling",1,h),er=i("xdr_polling","xdr_polling",1,h),Xe=new G([O],f),tr=new G([ae],f),nr=new G([Qn],f),$e=new G([new ee(te(qe),qe,Zn)],f),Je=new G([new ee(te(Fe),Fe,er)],f),Ke=new G([new ee(te($e),new pe([$e,new se(Je,{delay:4e3})]),Je)],f),ye=new ee(te(Ke),Ke,nr),_e;return e.useTLS?_e=new pe([Xe,new se(ye,{delay:2e3})]):_e=new pe([Xe,new se(tr,{delay:2e3}),new se(ye,{delay:5e3})]),new en(new rn(new ee(te(O),_e,ye)),r,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},on=sn,an=function(){var n=this;n.timeline.info(n.buildTimelineMessage({transport:n.name+(n.options.useTLS?"s":"")})),n.hooks.isInitialized()?n.changeState("initialized"):n.hooks.file?(n.changeState("initializing"),P.load(n.hooks.file,{useTLS:n.options.useTLS},function(e,t){n.hooks.isInitialized()?(n.changeState("initialized"),t(!0)):(e&&n.onError(e),n.onClose(),t(!1))})):n.onClose()},cn={getRequest:function(n){var e=new window.XDomainRequest;return e.ontimeout=function(){n.emit("error",new g),n.close()},e.onerror=function(t){n.emit("error",t),n.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&n.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&n.onChunk(200,e.responseText),n.emit("finished",200),n.close()},e},abortRequest:function(n){n.ontimeout=n.onerror=n.onprogress=n.onload=null,n.abort()}},hn=cn;const un=256*1024;class ln extends F{constructor(e,t,r){super(),this.hooks=e,this.method=t,this.url=r}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},p.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(p.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,t){for(;;){var r=this.advanceBuffer(t);if(r)this.emit("chunk",{status:e,data:r});else break}this.isBufferTooLong(t)&&this.emit("buffer_too_long")}advanceBuffer(e){var t=e.slice(this.position),r=t.indexOf(`
`);return r!==-1?(this.position+=r+1,t.slice(0,r)):null}isBufferTooLong(e){return this.position===e.length&&e.length>un}}var ve;(function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSED=3]="CLOSED"})(ve||(ve={}));var V=ve,dn=1;class fn{constructor(e,t){this.hooks=e,this.session=ze(1e3)+"/"+mn(8),this.location=pn(t),this.readyState=V.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState===V.OPEN)try{return p.createSocketRequest("POST",De(gn(this.location,this.session))).start(e),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,r){this.closeStream(),this.readyState=V.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:r})}onChunk(e){if(e.status===200){this.readyState===V.OPEN&&this.onActivity();var t,r=e.data.slice(0,1);switch(r){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var i=0;i<t.length;i++)this.onEvent(t[i]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0);break}}}onOpen(e){this.readyState===V.CONNECTING?(e&&e.hostname&&(this.location.base=vn(this.location.base,e.hostname)),this.readyState=V.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===V.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=p.createSocketRequest("POST",De(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",e=>{this.onChunk(e)}),this.stream.bind("finished",e=>{this.hooks.onFinished(this,e)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(e){D.defer(()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function pn(n){var e=/([^\?]*)\/*(\??.*)/.exec(n);return{base:e[1],queryString:e[2]}}function gn(n,e){return n.base+"/"+e+"/xhr_send"}function De(n){var e=n.indexOf("?")===-1?"?":"&";return n+e+"t="+ +new Date+"&n="+dn++}function vn(n,e){var t=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(n);return t[1]+e+t[3]}function ze(n){return p.randomInt(n)}function mn(n){for(var e=[],t=0;t<n;t++)e.push(ze(32).toString(32));return e.join("")}var bn=fn,yn={getReceiveURL:function(n,e){return n.base+"/"+e+"/xhr_streaming"+n.queryString},onHeartbeat:function(n){n.sendRaw("[]")},sendHeartbeat:function(n){n.sendRaw("[]")},onFinished:function(n,e){n.onClose(1006,"Connection interrupted ("+e+")",!1)}},_n=yn,wn={getReceiveURL:function(n,e){return n.base+"/"+e+"/xhr"+n.queryString},onHeartbeat:function(){},sendHeartbeat:function(n){n.sendRaw("[]")},onFinished:function(n,e){e===200?n.reconnect():n.onClose(1006,"Connection interrupted ("+e+")",!1)}},Sn=wn,kn={getRequest:function(n){var e=p.getXHRAPI(),t=new e;return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&n.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&n.onChunk(t.status,t.responseText),n.emit("finished",t.status),n.close();break}},t},abortRequest:function(n){n.onreadystatechange=null,n.abort()}},Cn=kn,Tn={createStreamingSocket(n){return this.createSocket(_n,n)},createPollingSocket(n){return this.createSocket(Sn,n)},createSocket(n,e){return new bn(n,e)},createXHR(n,e){return this.createRequest(Cn,n,e)},createRequest(n,e,t){return new ln(n,e,t)}},He=Tn;He.createXDR=function(n,e){return this.createRequest(hn,n,e)};var xn=He,Pn={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:u,DependenciesReceivers:A,getDefaultStrategy:on,Transports:Nt,transportConnectionInitializer:an,HTTPFactory:xn,TimelineTransport:St,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(n){window.Pusher=n;var e=()=>{this.onDocumentBody(n.ready)};window.JSON?e():P.load("json2",{},e)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:$,jsonp:mt}},onDocumentBody(n){document.body?n():setTimeout(()=>{this.onDocumentBody(n)},0)},createJSONPRequest(n,e){return new yt(n,e)},createScriptRequest(n){return new bt(n)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var n=this.getXHRAPI();return new n},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return zt},createWebSocket(n){var e=this.getWebSocketAPI();return new e(n)},createSocketRequest(n,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(n,e);if(this.isXDRSupported(e.indexOf("https:")===0))return this.HTTPFactory.createXDR(n,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var n=this.getXHRAPI();return!!n&&new n().withCredentials!==void 0},isXDRSupported(n){var e=n?"https:":"http:",t=this.getProtocol();return!!window.XDomainRequest&&t===e},addUnloadListener(n){window.addEventListener!==void 0?window.addEventListener("unload",n,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",n)},removeUnloadListener(n){window.addEventListener!==void 0?window.removeEventListener("unload",n,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",n)},randomInt(n){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*n)}},p=Pn,me;(function(n){n[n.ERROR=3]="ERROR",n[n.INFO=6]="INFO",n[n.DEBUG=7]="DEBUG"})(me||(me={}));var oe=me;class An{constructor(e,t,r){this.key=e,this.session=t,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(z({},t,{timestamp:D.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(oe.ERROR,e)}info(e){this.log(oe.INFO,e)}debug(e){this.log(oe.DEBUG,e)}isEmpty(){return this.events.length===0}send(e,t){var r=z({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(r,(i,s)=>{i||this.sent++,t&&t(i,s)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class En{constructor(e,t,r,i){this.name=e,this.priority=t,this.transport=r,this.options=i||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(this.isSupported()){if(this.priority<e)return Ue(new E,t)}else return Ue(new M,t);var r=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,o=function(){i.unbind("initialized",o),i.connect()},h=function(){s=X.createHandshake(i,function(O){r=!0,T(),t(null,O)})},f=function(O){T(),t(O)},k=function(){T();var O;O=re(i),t(new j(O))},T=function(){i.unbind("initialized",o),i.unbind("open",h),i.unbind("error",f),i.unbind("closed",k)};return i.bind("initialized",o),i.bind("open",h),i.bind("error",f),i.bind("closed",k),i.initialize(),{abort:()=>{r||(T(),s?s.close():i.close())},forceMinPriority:O=>{r||this.priority<O&&(s?s.close():i.close())}}}}function Ue(n,e){return D.defer(function(){e(n)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:Ln}=p;var On=function(n,e,t,r,i,s){var o=Ln[t];if(!o)throw new U(t);var h=(!n.enabledTransports||Se(n.enabledTransports,e)!==-1)&&(!n.disabledTransports||Se(n.disabledTransports,e)===-1),f;return h?(i=Object.assign({ignoreNullOrigin:n.ignoreNullOrigin},i),f=new En(e,r,s?s.getAssistant(o):o,i)):f=Rn,f},Rn={isSupported:function(){return!1},connect:function(n,e){var t=D.defer(function(){e(new M)});return{abort:function(){t.ensureAborted()},forceMinPriority:function(){}}}};function In(n){if(n==null)throw"You must pass an options object";if(n.cluster==null)throw"Options object must provide a cluster";"disableStats"in n&&L.warn("The disableStats option is deprecated in favor of enableStats")}const jn=(n,e)=>{var t="socket_id="+encodeURIComponent(n.socketId);for(var r in e.params)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);if(e.paramsProvider!=null){let i=e.paramsProvider();for(var r in i)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i[r])}return t};var Nn=n=>{if(typeof p.getAuthorizers()[n.transport]>"u")throw`'${n.transport}' is not a recognized auth transport`;return(e,t)=>{const r=jn(e,n);p.getAuthorizers()[n.transport](p,r,n,l.UserAuthentication,t)}};const Dn=(n,e)=>{var t="socket_id="+encodeURIComponent(n.socketId);t+="&channel_name="+encodeURIComponent(n.channelName);for(var r in e.params)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);if(e.paramsProvider!=null){let i=e.paramsProvider();for(var r in i)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i[r])}return t};var zn=n=>{if(typeof p.getAuthorizers()[n.transport]>"u")throw`'${n.transport}' is not a recognized auth transport`;return(e,t)=>{const r=Dn(e,n);p.getAuthorizers()[n.transport](p,r,n,l.ChannelAuthorization,t)}};const Hn=(n,e,t)=>{const r={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return(i,s)=>{const o=n.channel(i.channelName);t(o,r).authorize(i.socketId,s)}};function Me(n,e){let t={activityTimeout:n.activityTimeout||b.activityTimeout,cluster:n.cluster,httpPath:n.httpPath||b.httpPath,httpPort:n.httpPort||b.httpPort,httpsPort:n.httpsPort||b.httpsPort,pongTimeout:n.pongTimeout||b.pongTimeout,statsHost:n.statsHost||b.stats_host,unavailableTimeout:n.unavailableTimeout||b.unavailableTimeout,wsPath:n.wsPath||b.wsPath,wsPort:n.wsPort||b.wsPort,wssPort:n.wssPort||b.wssPort,enableStats:Fn(n),httpHost:Un(n),useTLS:qn(n),wsHost:Mn(n),userAuthenticator:Xn(n),channelAuthorizer:Jn(n,e)};return"disabledTransports"in n&&(t.disabledTransports=n.disabledTransports),"enabledTransports"in n&&(t.enabledTransports=n.enabledTransports),"ignoreNullOrigin"in n&&(t.ignoreNullOrigin=n.ignoreNullOrigin),"timelineParams"in n&&(t.timelineParams=n.timelineParams),"nacl"in n&&(t.nacl=n.nacl),t}function Un(n){return n.httpHost?n.httpHost:n.cluster?`sockjs-${n.cluster}.pusher.com`:b.httpHost}function Mn(n){return n.wsHost?n.wsHost:Bn(n.cluster)}function Bn(n){return`ws-${n}.pusher.com`}function qn(n){return p.getProtocol()==="https:"?!0:n.forceTLS!==!1}function Fn(n){return"enableStats"in n?n.enableStats:"disableStats"in n?!n.disableStats:!1}const Be=n=>"customHandler"in n&&n.customHandler!=null;function Xn(n){const e=Object.assign(Object.assign({},b.userAuthentication),n.userAuthentication);return Be(e)?e.customHandler:Nn(e)}function $n(n,e){let t;if("channelAuthorization"in n)t=Object.assign(Object.assign({},b.channelAuthorization),n.channelAuthorization);else if(t={transport:n.authTransport||b.authTransport,endpoint:n.authEndpoint||b.authEndpoint},"auth"in n&&("params"in n.auth&&(t.params=n.auth.params),"headers"in n.auth&&(t.headers=n.auth.headers)),"authorizer"in n)return{customHandler:Hn(e,t,n.authorizer)};return t}function Jn(n,e){const t=$n(n,e);return Be(t)?t.customHandler:zn(t)}class Kn extends F{constructor(e){super(function(t,r){L.debug(`No callbacks on watchlist events for ${t}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(t=>{this.emit(t.name,t)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",e=>{var t=e.event;t==="pusher_internal:watchlist_events"&&this.handleEvent(e)})}}function Wn(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}var Gn=Wn;class Vn extends F{constructor(e){super(function(t,r){L.debug("No callbacks on user for "+t)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(t,r)=>{if(t){L.warn(`Error during signin: ${t}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:r.auth,user_data:r.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",({previous:t,current:r})=>{t!=="connected"&&r==="connected"&&this._signin(),t==="connected"&&r!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Kn(e),this.pusher.connection.bind("message",t=>{var r=t.event;r==="pusher:signin_success"&&this._onSigninSuccess(t.data),this.serverToUserChannel&&this.serverToUserChannel.name===t.channel&&this.serverToUserChannel.handleEvent(t)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch{L.error(`Failed parsing user data after signin: ${e.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){L.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const e=t=>{t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():!t.subscriptionPending&&this.pusher.connection.state==="connected"&&t.subscribe()};this.serverToUserChannel=new le(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((t,r)=>{t.indexOf("pusher_internal:")===0||t.indexOf("pusher:")===0||this.emit(t,r)}),e(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:e,resolve:t,reject:r}=Gn();e.done=!1;const i=()=>{e.done=!0};e.then(i).catch(i),this.signinDonePromise=e,this._signinDoneResolve=t}}class R{static ready(){R.isReady=!0;for(var e=0,t=R.instances.length;e<t;e++)R.instances[e].connect()}static getClientFeatures(){return ke(xe({ws:p.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,t){Yn(e),In(t),this.key=e,this.options=t,this.config=Me(this.options,this),this.channels=X.createChannels(),this.global_emitter=new F,this.sessionID=p.randomInt(1e9),this.timeline=new An(this.key,this.sessionID,{cluster:this.config.cluster,features:R.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:oe.INFO,version:b.VERSION}),this.config.enableStats&&(this.timelineSender=X.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+p.TimelineTransport.name}));var r=i=>p.getDefaultStrategy(this.config,i,On);this.connection=X.createConnectionManager(this.key,{getStrategy:r,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",i=>{var s=i.event,o=s.indexOf("pusher_internal:")===0;if(i.channel){var h=this.channel(i.channel);h&&h.handleEvent(i)}o||this.global_emitter.emit(i.event,i.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",i=>{L.warn(i)}),R.instances.push(this),this.timeline.info({instances:R.instances.length}),this.user=new Vn(this),R.isReady&&this.connect()}switchCluster(e){const{appKey:t,cluster:r}=e;this.key=t,this.options=Object.assign(Object.assign({},this.options),{cluster:r}),this.config=Me(this.options,this),this.connection.switchCluster(this.key)}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new st(6e4,function(){t.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,t,r){return this.global_emitter.bind(e,t,r),this}unbind(e,t,r){return this.global_emitter.unbind(e,t,r),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():!t.subscriptionPending&&this.connection.state==="connected"&&t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e),t&&t.subscribed&&t.unsubscribe())}send_event(e,t,r){return this.connection.send_event(e,t,r)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}R.instances=[],R.isReady=!1,R.logToConsole=!1,R.Runtime=p,R.ScriptReceivers=p.ScriptReceivers,R.DependenciesReceivers=p.DependenciesReceivers,R.auth_callbacks=p.auth_callbacks;var be=d.default=R;function Yn(n){if(n==null)throw"You must pass your app key when you instantiate Pusher."}p.setup(R)}])})})(Ve);var cr=Ve.exports;const hr=ar(cr),fr=w=>({name:"Ad Soyad",phone:"Telefon",email:"Email",address:"Adres",city:"İl",state:"İlçe",zip:"Posta Kodu",country:"Ülke",billing:"Faturalandırma Türü",tax_name:"Vergi Mükellefi Adı",tax_number:"Vergi Numarası",tax_address:"Vergi Adresi",tax_office:"Vergi Aairesi",vehicle_type:"Teslimat Türü",created_at:"Oluşturulma Tarihi",updated_at:"Güncellenme Tarihi",identity:"Kimlik Numarası",birth_date:"Doğum Tarihi",latitude:"Enlem",longitude:"Boylam",sector:"Sektör",businessPhone:"İşletme Telefonu"})[w],pr=w=>{let _={admin:{label:"Yönetici",severity:"danger"},business:{label:"İşletme",severity:"info"},courier:{label:"Kurye",severity:"warning"}};return _[w]?_[w]:{label:w,severity:"secondary"}},gr=(w,_=!1,x=!0,d=!1)=>{let S={draft:{label:"Taslak",severity:"secondary"},preparing:{label:"Hazırlanıyor",severity:"warning"},opened:{label:"Açık",severity:"warning"},transporting:{label:"Taşımada",severity:"info"},delivered:{label:"Teslim Edildi",severity:"success"},canceled:{label:"İptal Edildi",severity:"danger"},deleted:{label:"Silindi",severity:"danger"}};return _?Object.entries(S).map(([v,u])=>({value:v,label:u.label,severity:u.severity})):w==="canceled"&&d&&!x?{label:"İptal - Reddedildi",severity:"danger"}:w==="canceled"&&!x&&!d?{label:"İptal - Onay Bekliyor",severity:"warning"}:S[w]},vr=(w,_)=>w==="billing"?_==="company"?"Şirket":"Bireysel":w==="vehicle_type"?_==="motorcycle"?"Motosiklet":_==="bicycle"?"Bisiklet":_==="car"?"Araba":_:w==="created_at"||w==="updated_at"?new Date(_).toLocaleString():w==="country"&&_==="turkey"?"Türkiye":_,mr=async(w,_)=>{if(_){let x=route("profile.update"),d=new Headers;return d.append("X-CSRF-TOKEN",_),d.append("Content-Type","application/json"),await(await fetch(x,{method:"POST",headers:d,body:JSON.stringify({...w,_method:"PUT"})})).json()}else return!1},br=w=>new Promise((_,x)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(d=>{_({latitude:d.coords.latitude,longitude:d.coords.longitude})},d=>{console.log(d),w.show({severity:"error",summary:"Hata",detail:"Konum Bilginiz Alınamadı.Lütfen Tarayıcı Ayarlarınızı Kontrol Ediniz."}),x("Konum Bilgisi Alınamadı")}):(w.show({severity:"error",summary:"Hata",detail:"Konum Bilginiz Alınamadı.Lütfen Tarayıcı Ayarlarınızı Kontrol Ediniz."}),x("Konum Bilgisi Alınamadı"))}),yr=(w,_=!1)=>{let x={wrongAddress:"Yanlış Adres",notInAddress:"Adreste Yok",addressMismatch:"Adres Uyuşmaması",accident:"Kaza",heavyTraffic:"Yoğun Trafik",productDamaged:"Ürün Hasar Aldı",tireBust:"Lastik Patladı"};return _?x:x[w]},_r=w=>{let _=new hr("ac901a0c46f2331d501e",{cluster:"eu"});return _.subscribe("order-channel").bind("order-event",x=>{x.businessId===w&&window.dispatchEvent(new CustomEvent("order-event",{detail:x}))}),()=>{_.unsubscribe("order-channel")}},wr=w=>{let _=x=>{w(x.detail)};return window.addEventListener("order-event",_),()=>{window.removeEventListener("order-event",_)}},Sr=async(w,_)=>{let x=route("getOrderDetails",w),d=new Headers;return d.append("X-CSRF-TOKEN",_),d.append("Content-Type","application/json"),await(await fetch(x,{method:"POST",headers:d})).json()},kr=async(w,_)=>{let x=route("getOrderLocations",w),d=new Headers;return d.append("X-CSRF-TOKEN",_),d.append("Content-Type","application/json"),await(await fetch(x,{method:"POST",headers:d})).json()},Cr=()=>["Restoran","Market","Eczane","Kırtasiye","Çiçekçi","Elektronik","Giyim","Mobilya","Ev ve Bahçe","Hizmet","Otel","Temizlik","Pet Shop","Oto Servis","Kuaför","Eğitim","Kargo","Yemek Dağıtım","Sağlık","Spor ve Fitness","İnşaat Malzemeleri","Büro Malzemeleri","Emlak","Yazılım","Tarım ve Hayvancılık","Toptan Ticaret","Sigorta","Danışmanlık","Medya ve Yayıncılık","Lojistik","Sanayi ve Üretim","Gıda Üretimi","Finans ve Bankacılık","Kimya","Turizm","Mücevher ve Takı","Kitapçı","Oyun ve Eğlence","Optik","Sanat Galerisi","Nakliye","Bahçe ve Peyzaj","Mobilya ve Dekorasyon","Fotoğrafçılık","Sinema ve Tiyatro","Yapı Market","Güzellik ve Kozmetik","Dondurma ve Tatlı","Balıkçı","Bilişim Teknolojileri","Hukuk Bürosu","Mimarlık ve İç Mimarlık","Bireysel Eğitim ve Dershane","Hayvancılık ve Ürünleri","Çocuk Giyim","Kadın Giyim","Erkek Giyim","Saat ve Aksesuar","Turizm Acentası","Veteriner","Küçük Ev Aletleri","Bebek ve Çocuk Ürünleri","Araba Kiralama","Tatil Köyü","Kuruyemiş","Mobilya İmalatı","Ayakkabı ve Çanta","Moda ve Tekstil","Organizasyon","Spor Salonu","Kahve Dükkanı","Atölye","Seramik ve Çömlekçilik","Çikolata ve Şekerleme","Seyahat Acentası","Fırın","Tasarım ve Grafik","İkinci El Mağaza","Antikacılık","Biyoteknoloji","Ambalaj ve Paketleme","Sigorta ve Finans","Motosiklet Aksesuarları","Online Eğitim","Hediye ve Aksesuar","Deniz Ürünleri","Bahçe ve Çiçek Düzenleme"];export{vr as a,gr as b,br as c,Sr as d,pr as e,kr as f,fr as g,yr as h,Cr as i,wr as l,_r as s,mr as u};
