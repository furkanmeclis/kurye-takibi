import{r,u as R,j as e,B as o,R as O,Y as k,a as z}from"./app-xZ6V4ZBq.js";import{P as E,M as F}from"./PageContainer-CwrXYOTm.js";import{T as A}from"./toast.esm-BwFu0cm_.js";import{g as G,e as H}from"./businesses-B8cWdWWF.js";import{C as K,D as C,a as j,T as V}from"./checkbox.esm-BMQaN30I.js";import{M as N}from"./message.esm-AeWhPiLH.js";import{O as I}from"./overlaypanel.esm-C6s6V4M6.js";import{g as W,a as $}from"./globalHelper-BwHF33TP.js";import{D as Y}from"./dialog.esm-CeH1iwwZ.js";import"./PersonalInformation-CYS1VhTr.js";import"./inputmask.esm-9TJjYyx1.js";import"./PersonalInformation-D8vwnKYU.js";import"./styleclass.esm-SOOUVKZn.js";const ne=({auth:D,csrfToken:h})=>{const[g,n]=r.useState(!0),[M,c]=r.useState(!1),[u,v]=r.useState([]),[d,S]=r.useState(null),[i,y]=R(["name","email","phone","details_button","created_at","actions"],"adminBusinessesWaitApprovalDetailsColumns"),[x,b]=r.useState(null);r.useEffect(()=>{G("waitApprovals",h).then(t=>{t.status?(v(t.details),n(!1),b(null)):(b(t.message),n(!1))}).catch(t=>{b(t.message),n(!1)})},[]);const w=(t,l)=>{z({target:t.currentTarget,message:"İşletme Bilgileri Onaylanacaktır. Onaylamak istediğinize emin misiniz?",acceptLabel:"Onayla",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){n(!0),H(l,h).then(({status:a,message:s})=>{var p,f;a?(v(u.filter(L=>L.business.id!==l)),(p=m.current)==null||p.show({severity:"success",summary:"Başarılı",detail:s})):(f=m.current)==null||f.show({severity:"error",summary:"Hata",detail:s})}).catch(a=>{var s;(s=m.current)==null||s.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>{n(!1),c(!1)})}})};let P=[{field:"name",header:"Adı Soyadı",hidden:!i.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!i.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!i.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"details_button",header:"İşletme Bilgileri",hidden:!i.includes("details_button"),align:"center",body:t=>e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-file",tooltip:"İşletme Bilgileri",severity:"info",size:"small",tooltipOptions:{position:"top"},onClick:l=>{S(t),c(!0)}})})},{field:"updated_at",header:"Bilgilerin Güncellenme Tarihi",hidden:!i.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Bilgilerin Güncellenme Tarihine Göre",filterType:"date",body:t=>e.jsx("span",{children:new Date(t.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!i.includes("actions"),body:t=>e.jsx("div",{className:"flex gap-2",children:e.jsx(o,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:l=>{w(l,t.business.id)}})})}];const B=O.useRef(null),T=t=>{let l=[];return t===null||Object.entries(t).forEach(([a,s])=>{typeof s=="string"&&(a!=="courier"||a!=="status"||a!=="completed"||a!=="approved"||a!=="latitude"||a!=="longitude"||a!=="id"||a!=="courier_id"||a!=="created_at"||a!=="updated_at")&&l.push({label:W(String(a)),value:$(String(a),String(s))})}),l},_=()=>e.jsx(e.Fragment,{children:e.jsx(V,{end:e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-bars",onClick:t=>{var l;(l=B.current)==null||l.toggle(t)}})})})}),m=O.useRef(null);return e.jsx(E,{auth:D,csrfToken:h,children:e.jsxs(F,{children:[e.jsx(k,{title:"Onay Bekleyen İşletmeler"}),e.jsx(A,{ref:m}),e.jsxs(I,{ref:B,showCloseIcon:!0,style:{width:"300px"},children:[e.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:e.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",i.length,")"]})}),e.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:P.map((t,l)=>{if(t.selectionMode==="multiple")return null;let a=t.header,s=t.field;return e.jsxs("div",{className:"flex align-items-center",children:[e.jsx(K,{inputId:`column${l}`,checked:i.includes(s),onChange:p=>{p.checked?y([...i,s]):y(i.filter(f=>f!==s))}}),e.jsx("label",{htmlFor:`column${l}`,className:"ml-2",children:a})]},l)})})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Onay Bekleyen İşletmeler (İşletme Bilgileri Onay Ekranı)"}),x!==null&&e.jsx(N,{className:"w-full",severity:"error",text:x}),!g&&u.length===0&&e.jsx(N,{className:"w-full",severity:"info",text:"Onay bekleyen İşletme bulunamadı."}),e.jsx(C,{hidden:!g&&u.length===0||x!==null,loading:g,value:u,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:_,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},emptyMessage:"İşletme bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:P.map((t,l)=>e.jsx(j,{...t},l))}),e.jsx(Y,{header:"İşletme Bilgileri",draggable:!1,footer:e.jsxs("div",{className:"gap-2",children:[e.jsx(o,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>c(!1)}),e.jsx(o,{size:"small",icon:"pi pi-check-circle",label:"Bilgileri Onayla",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:t=>{var l;w(t,(l=d==null?void 0:d.business)==null?void 0:l.id)}})]}),onHide:()=>c(!1),visible:M,style:{width:"50vw"},resizable:!1,className:"mx-3 sm:mx-0 sm:w-full md:w-8 lg:w-6 p-fluid",modal:!0,children:e.jsxs(C,{value:T(d),filters:{label:{value:null,matchMode:"contains"},value:{value:null,matchMode:"contains"}},filterDisplay:"row",paginator:!0,stripedRows:!0,rows:5,children:[e.jsx(j,{field:"label",showFilterMenu:!1,filter:!0,header:"Anahtar"}),e.jsx(j,{field:"value",showFilterMenu:!1,filter:!0,header:"Değer"})]})})]})]})})};export{ne as default};
