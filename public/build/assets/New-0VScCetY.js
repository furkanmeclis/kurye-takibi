import{R as E,r as x,j as i,Y as S,c as t,B}from"./app-C7KCH85h.js";import{P as F,M as O}from"./PageContainer-cZa-KtPx.js";import{c as A,b as c,d as I,u as T,I as p}from"./inputtext.esm-KLIqssz8.js";import{T as $}from"./toast.esm-ChJ7o9Yf.js";import{I as q}from"./inputmask.esm-CPoZMXYd.js";import{I as R}from"./inputswitch.esm-DCROp3W5.js";import{s as V}from"./businesses-B8cWdWWF.js";import"./PersonalInformation-CFPCs-iQ.js";import"./message.esm-Can9Yc15.js";import"./index.esm-BtriMSeC.js";import"./PersonalInformation-korKsWPp.js";import"./globalHelper-DC93hlCg.js";import"./styleclass.esm-BpUyAfSu.js";import"./sidebar.esm-t1zv9ION.js";import"./ActiveOrder-BzF7Xial.js";const ie=({auth:v,csrfToken:f})=>{const d=E.useRef(null),[l,h]=x.useState(!1),[g,N]=x.useState(!1),w=A().shape({email:c().email("Geçerli bir email adresi giriniz").required("Email adresinizi giriniz"),name:c().required("Ad soyad giriniz").min(3,"Ad Soyad en az 3 karakter olmalıdır"),password:c().required("Şifrenizi giriniz").min(6,"Şifreniz en az 6 karakter olmalıdır").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d!@#$%^&*(),.?":{}|<>]{6,}$/,"Şifreniz en az bir büyük harf, bir küçük harf ve bir rakam içermelidir"),password_confirmation:c().required("Şifreyi tekrar giriniz").oneOf([I("password"),""],"Şifreler uyuşmuyor"),phone:c().required("Telefon numarası giriniz").matches(/^\(\d{3}\)-\d{3}-\d{4}$/,"Geçerli bir telefon numarası giriniz")}),{values:o,setFieldValue:k,resetForm:y,submitCount:s,setErrors:z,handleChange:m,handleSubmit:_,errors:e,isValid:C}=T({initialValues:{name:"",email:"",phone:"",password:"",password_confirmation:"",account_verification:!0},validationSchema:w,validateOnChange:g,validateOnBlur:g,onSubmit:n=>{h(!0);let u={...n,account_verification:n.account_verification?1:0};V(u,f).then(a=>{var j,b;if(a.status)(j=d.current)==null||j.show({severity:"success",summary:"Başarılı",detail:a.message}),y();else{let r={};a!=null&&a.emailExists&&(a==null?void 0:a.emailExists)===!0&&(r={...r,email:"Bu email adresi zaten kullanılmakta"}),a!=null&&a.phoneExists&&(a==null?void 0:a.phoneExists)===!0&&(r={...r,phone:"Bu telefon numarası zaten kullanılmakta"}),z(r),(b=d.current)==null||b.show({severity:"error",summary:"Hata",detail:a.message})}}).catch(()=>{var a;(a=d.current)==null||a.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{h(!1)})}});return x.useEffect(()=>{s>0&&N(!0)},[s]),i.jsx(F,{auth:v,csrfToken:f,children:i.jsxs(O,{children:[i.jsx(S,{title:"Yeni İşletme Ekle"}),i.jsx($,{ref:d}),i.jsxs("div",{className:"card",children:[i.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Yeni İşletme Ekle"}),i.jsxs("div",{className:"grid",children:[i.jsxs("div",{className:"col-12 lg:col-2",children:[i.jsx("div",{className:"text-900 font-medium text-xl mb-3",children:"İşletme Bilgileri"}),i.jsxs("p",{className:"m-0 p-0 text-600 line-height-3 mr-3",children:["İşletme Sahibinin bilgilerini giriniz.",e&&Object.keys(e).length>0&&i.jsx(i.Fragment,{children:i.jsx("ul",{className:"mt-3",children:Object.keys(e).map((n,u)=>i.jsx("li",{className:"text-red-500 text-sm",children:e[n]},u))})})]})]}),i.jsx("div",{className:"col-12 lg:col-10",children:i.jsxs("form",{onSubmit:_,className:"grid formgrid p-fluid",children:[i.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[i.jsxs("label",{htmlFor:"name",className:t("font-medium text-900",{"text-red-500":!!e.name,"text-green-500":!e.name&&s>0}),children:[i.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.name,"pi-check-circle text-green-500 text-sm":!e.name&&s>0})})," Ad Soyad (İşletme Sahibi)"]}),i.jsx(p,{id:"name",type:"text",autoComplete:"off",name:"name",tooltip:e==null?void 0:e.name,tooltipOptions:{position:"top"},disabled:l,onChange:m,value:o.name,className:t("w-full",{"p-invalid":!!e.name})})]}),i.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[i.jsxs("label",{htmlFor:"email",className:t("font-medium text-900",{"text-red-500":!!e.email,"text-green-500":!e.email&&s>0}),children:[i.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.email,"pi-check-circle text-green-500 text-sm":!e.email&&s>0})})," Email Adresi"]}),i.jsx(p,{id:"email",type:"email",autoComplete:"off",name:"email",tooltip:e==null?void 0:e.email,tooltipOptions:{position:"top"},disabled:l,onChange:m,value:o.email,className:t("w-full",{"p-invalid":!!e.email})})]}),i.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[i.jsxs("label",{htmlFor:"phone",className:t("font-medium text-900",{"text-red-500":!!e.phone,"text-green-500":!e.phone&&s>0}),children:[i.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.phone,"pi-check-circle text-green-500 text-sm":!e.phone&&s>0})})," Telefon Numarası"]}),i.jsx(q,{autoComplete:"off",name:"phone",tooltip:e==null?void 0:e.phone,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:l,onChange:m,value:o.phone,mask:"(999)-999-9999",className:t("w-full",{"p-invalid":!!e.phone})})]}),i.jsx("div",{className:"col-6"}),i.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[i.jsxs("label",{htmlFor:"password",className:t("font-medium text-900",{"text-red-500":!!e.password,"text-green-500":!e.password&&s>0}),children:[i.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.password,"pi-check-circle text-green-500 text-sm":!e.password&&s>0})})," Şifre"]}),i.jsx(p,{id:"password",type:"password",autoComplete:"off",name:"password",tooltip:e==null?void 0:e.password,tooltipOptions:{position:"top"},disabled:l,onChange:m,value:o.password,className:t("w-full",{"p-invalid":!!e.password})})]}),i.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[i.jsxs("label",{htmlFor:"password_confirmation",className:t("font-medium text-900",{"text-red-500":!!e.password_confirmation,"text-green-500":!e.password_confirmation&&s>0}),children:[i.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.password_confirmation,"pi-check-circle text-green-500 text-sm":!e.password_confirmation&&s>0})})," Şifre Tekrarı"]}),i.jsx(p,{id:"password_confirmation",type:"password",autoComplete:"off",name:"password_confirmation",tooltip:e==null?void 0:e.password_confirmation,tooltipOptions:{position:"top"},disabled:l,onChange:m,value:o.password_confirmation,className:t("w-full",{"p-invalid":!!e.password_confirmation})})]}),i.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[i.jsx("label",{htmlFor:"account_verification",className:t("font-medium text-900 cursor-pointer select-none"),children:"Hesap Aktifliği"}),i.jsx("br",{}),i.jsx(R,{inputId:"account_verification",checked:o.account_verification,onChange:n=>k("account_verification",n.value??!1)})]}),i.jsx("div",{className:"col-12",children:i.jsx(B,{label:"İşletme Ekle",disabled:!C,loading:l,type:"submit",size:"small",className:"w-auto mt-3"})})]})})]})]})]})})};export{ie as default};
