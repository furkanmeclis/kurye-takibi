import{r as o,L as F,y as E,j as e,Y as I,c as l,d as g,B as k}from"./app-Q7AXU0aI.js";import{c as T,b as y,u as O,I as b}from"./inputtext.esm-DYxVi6bR.js";import{F as R}from"./FullPageLayout-Cb1oEf_W.js";import{T as B}from"./toast.esm-CfmbWQEZ.js";import{I as G}from"./inputswitch.esm-BN_GMhiZ.js";import"./index.esm-De60uoIs.js";const P=({csrfToken:j="",auth:L={}})=>{const{layoutConfig:m}=o.useContext(F),w=()=>{const i="/layout/images/logo-";let s;return m.layoutTheme==="primaryColor"&&m.theme!=="yellow"?s="light.png":s=m.colorScheme==="light"?"dark.png":"light.png",i+s},[c,p]=o.useState(!1),n=o.useRef(null),[u,N]=o.useState(!1),v=T().shape({email:y().email("Geçerli bir email adresi giriniz").required("Email adresinizi giriniz"),password:y().required("Şifrenizi giriniz")}),{values:d,submitCount:r,setFieldValue:S,handleChange:h,handleSubmit:C,errors:a,isValid:z}=O({initialValues:{email:localStorage.getItem("loginEmailForRememberMe")||"",password:"",remember:!!localStorage.getItem("loginEmailForRememberMe")},validationSchema:v,validateOnChange:u,validateOnBlur:u,onSubmit:i=>{let s=new Headers;p(!0),s.append("Content-Type","application/json"),s.append("X-CSRF-TOKEN",j),fetch(route("login"),{method:"POST",headers:s,body:JSON.stringify(i)}).then(t=>t.json()).then(t=>{var x,f;t.status?(i.remember?localStorage.setItem("loginEmailForRememberMe",i.email):localStorage.removeItem("loginEmailForRememberMe"),(x=n.current)==null||x.show({severity:"success",summary:"Başarılı",detail:t.message}),E.visit(route((t==null?void 0:t.redirect)||"login"))):(f=n.current)==null||f.show({severity:"error",summary:"Hata",detail:t.message})}).catch(()=>{var t;(t=n.current)==null||t.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{p(!1)})}});return o.useEffect(()=>{r>0&&N(!0)},[r]),e.jsxs(R,{children:[e.jsx(I,{title:"Giriş Yap"}),e.jsx(B,{ref:n}),e.jsx("div",{className:l("surface-ground h-screen w-screen flex align-items-center justify-content-center"),children:e.jsxs("form",{onSubmit:C,className:"surface-card py-7 px-5 sm:px-7 shadow-2 flex flex-column w-11 sm:w-30rem",style:{borderRadius:"14px"},children:[e.jsx("div",{className:"flex justify-content-center mb-4",children:e.jsx("img",{src:w(),alt:"logo",className:"tw-h-20"})}),e.jsx("h1",{className:"font-bold text-2xl mt-0 mb-2",children:"Giriş Formu"}),e.jsx("p",{className:"text-color-secondary",children:"Giriş yapmak için lütfen email adresinizi ve şifrenizi giriniz."}),e.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3 mt-4",children:[e.jsx("i",{className:l("pi pi-at",{"text-red-500":!!a.email,"text-green-500":a&&!a.email&&r>0})}),e.jsx(b,{type:"email",autoComplete:"off",name:"email",tooltip:a==null?void 0:a.email,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:c,onChange:h,value:d.email,placeholder:"Email Adresiniz",className:l("w-full",{"p-invalid":!!a.email})}),e.jsx("i",{className:l("pi",{"pi-times-circle text-red-500":!!a.email,"pi-check-circle text-green-500":!a.email&&r>0})})]}),e.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[e.jsx("i",{className:l("pi pi-key",{"text-red-500":!!a.password,"text-green-500":a&&!a.password&&r>0})}),e.jsx(b,{type:"password",autoComplete:"off",name:"password",tooltip:a==null?void 0:a.password,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:c,className:l("w-full",{"p-invalid":!!a.password}),onChange:h,value:d.password,placeholder:"Şifreniz"}),e.jsx("i",{className:l("pi",{"pi-times-circle text-red-500":!!a.password,"pi-check-circle text-green-500":!a.password&&r>0})})]}),e.jsxs("div",{className:"field-checkbox mb-3",children:[e.jsx(G,{checked:d.remember,inputId:"remember",onChange:i=>S("remember",i.value??!1)}),e.jsx("label",{htmlFor:"remember",className:"ml-2",children:"Beni Hatırla"})]}),e.jsxs("span",{className:"text-color-secondary flex justify-content-between mb-4",children:[e.jsx(g,{href:route("password.request"),className:"text-color-secondary hover:text-color",children:"Şifremi Unuttum"}),e.jsx(g,{href:route("register"),className:"text-color-secondary hover:text-color",children:"Kayıt Ol"})]}),e.jsx(k,{label:"Giriş Yap",className:"mb-4",disabled:!z,loading:c,type:"submit"})]})})]})};export{P as default};
