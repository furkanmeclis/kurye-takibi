import{r as i,L as W,j as e,Y as O,B as u}from"./app-C7KCH85h.js";import{P as E}from"./chart.esm-D5VRezD-.js";import{D}from"./message.esm-Can9Yc15.js";import{P as B,M as L}from"./PageContainer-cZa-KtPx.js";import{g as R}from"./PersonalInformation-korKsWPp.js";import"./index.esm-BtriMSeC.js";import"./inputtext.esm-KLIqssz8.js";import"./toast.esm-ChJ7o9Yf.js";import"./PersonalInformation-CFPCs-iQ.js";import"./inputmask.esm-CPoZMXYd.js";import"./styleclass.esm-BpUyAfSu.js";import"./sidebar.esm-t1zv9ION.js";import"./ActiveOrder-BzF7Xial.js";import"./globalHelper-DC93hlCg.js";let s;function Q({auth:x,csrfToken:d,errors:h,courierIsTransporting:g=!1}){const{layoutConfig:f}=i.useContext(W);i.useState([]);const[v,j]=i.useState(null);i.useState(null);const[b,m]=i.useState(null),[V,k]=i.useState(!1),[r,N]=i.useState({time:0,courierWaitOrdersCount:0,customerCount:0,count:0,graph:{thisWeek:{counts:[],times:[]},lastWeek:{counts:[],times:[]}}}),y=()=>{k(!0),R(d).then(t=>{t.status&&(N(t.statics),s.datasets[0].data=t.statics.graph.thisWeek.counts,s.datasets[1].data=t.statics.graph.thisWeek.times,s={...s})})};i.useEffect(()=>{y()},[]);const p=[{name:"Bu Hafta",code:"0"},{name:"Geçen Hafta",code:"1"}],w=()=>{m(p[0])},S=t=>{m(t.value),t.value.code==="1"?(s.datasets[0].data=r.graph.lastWeek.counts,s.datasets[1].data=r.graph.lastWeek.times):(s.datasets[0].data=r.graph.thisWeek.counts,s.datasets[1].data=r.graph.thisWeek.times),s={...s}},C=()=>{const t=getComputedStyle(document.documentElement),a=t.getPropertyValue("--primary-color"),o=t.getPropertyValue("--primary-600");return{labels:["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],datasets:[{label:"Sipariş Adedi",data:[],backgroundColor:[a],hoverBackgroundColor:[o],fill:!0,borderRadius:"3",borderSkipped:"top bottom",barPercentage:.5},{label:"Sipariş Teslimat Süresi Ortalama (dk)",data:[],backgroundColor:[t.getPropertyValue("--pink-300")],hoverBackgroundColor:[t.getPropertyValue("--pink-600")],fill:!0,borderRadius:"1",borderSkipped:"top bottom",barPercentage:.5}]}},n=t=>`/demo/images/dashboard/${t}.svg`;return i.useEffect(()=>{w()},[]),i.useEffect(()=>{const t=getComputedStyle(document.documentElement),a=t.getPropertyValue("--text-color-secondary"),o=t.getPropertyValue("--surface-border");s=C(),j({plugins:{legend:{position:"bottom",align:"end",labels:{color:a}}},responsive:!0,maintainAspectRatio:!1,hover:{mode:"index"},scales:{y:{min:0,ticks:{stepSize:0,color:a},grid:{color:o}},x:{grid:{tickBorderDash:[2,2],display:!0,color:o},ticks:{color:a}}}})},[f]),e.jsx(B,{auth:x,csrfToken:d,errors:h,courierIsTransporting:g,children:e.jsxs(L,{children:[e.jsx(O,{title:"Kurye Anasayfa"}),e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-clock text-6xl text-blue-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-blue-500 block white-space-nowrap",children:"Ortalama Teslimat Süresi"}),e.jsxs("span",{className:"text-blue-500 block text-4xl font-bold",children:[r.time,"dk"]})]})]}),e.jsx("img",{src:n("users"),className:"w-full",alt:"users"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-users text-6xl text-orange-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-orange-500 block white-space-nowrap",children:"Müşteri Sayısı"}),e.jsx("span",{className:"text-orange-500 block text-4xl font-bold",children:r.customerCount})]})]}),e.jsx("img",{src:n("locations"),className:"w-full",alt:"locations"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card h-full p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-box text-6xl text-purple-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-purple-500 block white-space-nowrap",children:"Teslim Edilen Sipariş Adedi"}),e.jsx("span",{className:"text-purple-500 block text-4xl font-bold",children:r.count})]})]}),e.jsx("img",{src:n("interactions"),className:"w-full mt-auto",alt:"interactions"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-bolt text-6xl text-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-green-500 block white-space-nowrap",children:"Kurye Bekleyen Sipariş Adedi"}),e.jsxs("span",{className:"text-green-500 block text-4xl font-bold",children:[r.courierWaitOrdersCount," "]})]})]}),e.jsx("img",{src:n("rate"),className:"w-full",alt:"conversion"})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card h-full",children:[e.jsxs("div",{className:"flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{children:"Günlük Sipariş Grafiği"}),e.jsxs("div",{children:[e.jsx(D,{options:p,value:b,onChange:S,optionLabel:"name"}),e.jsx(u,{icon:"pi pi-cloud-download",tooltip:"PNG olarak kaydet",tooltipOptions:{position:"top"},className:"ml-2",severity:"secondary",outlined:!0,onClick:()=>{const t=document.querySelector(".graph canvas"),a=document.createElement("canvas");a.width=t.width,a.height=t.height;const o=a.getContext("2d");if(o){o.fillStyle="white",o.drawImage(t,0,0);const c=document.createElement("a");c.href=a.toDataURL("image/png");let l=Math.random().toString(36).substring(7);c.download=`siparis-grafigi-${l}.png`,c.click()}}}),e.jsx(u,{icon:"pi pi-print",tooltip:"Yazdır",tooltipOptions:{position:"top"},className:"ml-2",severity:"secondary",outlined:!0,onClick:async()=>{const t=document.querySelector(".graph canvas"),a=document.createElement("canvas");a.width=t.width,a.height=t.height,a.style.backgroundColor="#000";const o=a.getContext("2d");if(o){o.drawImage(t,0,0);const c=new Image;c.src=a.toDataURL("image/png",1),await new Promise(P=>{c.onload=P});const l=window.open("");l==null||l.document.write(c.outerHTML),await(l==null?void 0:l.print()),l==null||l.close()}}})]})]}),e.jsx("div",{className:"graph",children:e.jsx(E,{type:"bar",height:"400px",data:s,options:v})})]})})]})]})})}export{Q as default};
