import{r as u,j as e,Y as z,c as r,b as h,B as v,y as k}from"./app-wUprH5bk.js";import{c as S,b as c,d as O,u as C,T,I as m}from"./toast.esm-CblH2lLC.js";import{F as _}from"./FullPageLayout-Blvqv4mn.js";const P=({csrfToken:x="",auth:E={},email:y,token:w})=>{const[s,d]=u.useState(!1),t=u.useRef(null),b=S().shape({email:c().email("Geçerli bir email adresi giriniz").required("Email adresinizi giriniz"),password:c().required("Şifrenizi giriniz").min(6,"Şifreniz en az 6 karakter olmalıdır").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,"Şifreniz en az bir büyük harf, bir küçük harf ve bir rakam içermelidir"),password_confirmation:c().required("Şifrenizi tekrar giriniz").oneOf([O("password"),""],"Şifreler uyuşmuyor")}),{values:o,handleChange:l,handleSubmit:j,errors:a,isValid:N}=C({initialValues:{email:y,password:"",password_confirmation:"",token:w},validationSchema:b,onSubmit:g=>{let n=new Headers;d(!0),n.append("Content-Type","application/json"),n.append("X-CSRF-TOKEN",x),fetch(route("password.store"),{method:"POST",headers:n,body:JSON.stringify(g)}).then(i=>i.json()).then(i=>{var p,f;i.status?((p=t.current)==null||p.show({severity:"success",summary:"Başarılı",detail:i.message}),k.visit(route((i==null?void 0:i.redirect)||"login"))):(f=t.current)==null||f.show({severity:"error",summary:"Hata",detail:i.message})}).catch(()=>{var i;(i=t.current)==null||i.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{d(!1)})}});return e.jsxs(_,{children:[e.jsx(z,{title:"Şifremi Sıfırla"}),e.jsx(T,{ref:t}),e.jsx("div",{className:r("surface-ground h-screen w-screen flex align-items-center justify-content-center"),children:e.jsxs("form",{onSubmit:j,className:"surface-card py-7 px-5 sm:px-7 shadow-2 flex flex-column w-11 sm:w-30rem",style:{borderRadius:"14px"},children:[e.jsx("h1",{className:"font-bold text-2xl mt-0 mb-2",children:"Şifre Sıfırlama Formu"}),e.jsx("p",{className:"text-color-secondary",children:"Şifrenizi yenilemek için lütfen yeni şifrenizi giriniz."}),e.jsxs("span",{className:"p-input-icon-left mb-3 mt-4",children:[e.jsx("i",{className:"pi pi-at"}),e.jsx(m,{type:"email",autoComplete:"off",name:"email",tooltip:a==null?void 0:a.email,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:s,readOnly:!0,onChange:l,value:o.email,className:r("w-full",{"p-invalid":!!a.email}),placeholder:"Email Adresiniz"})]}),e.jsxs("span",{className:"p-input-icon-left mb-3",children:[e.jsx("i",{className:"pi pi-key"}),e.jsx(m,{type:"password",autoComplete:"off",name:"password",tooltip:a==null?void 0:a.password,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:s,onChange:l,value:o.password,placeholder:"Yeni Şifreniz",className:r("w-full",{"p-invalid":!!a.password})})]}),e.jsxs("span",{className:"p-input-icon-left mb-3",children:[e.jsx("i",{className:"pi pi-key"}),e.jsx(m,{type:"password",autoComplete:"off",name:"password_confirmation",tooltip:a==null?void 0:a.password_confirmation,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:s,onChange:l,value:o.password_confirmation,placeholder:"Yeni Şifrenizi Onaylayın",className:r("w-full",{"p-invalid":!!a.password_confirmation})})]}),e.jsxs("span",{className:"text-color-secondary flex justify-content-between mb-4",children:[e.jsx(h,{href:route("login"),className:"text-color-secondary hover:text-color",children:"Giriş Yap"}),e.jsx(h,{href:route("register"),className:"text-color-secondary hover:text-color",children:"Kayıt Ol"})]}),e.jsx(v,{label:"Şifremi Sıfırla",className:"mb-4",disabled:!N,loading:s,type:"submit"})]})})]})};export{P as default};
