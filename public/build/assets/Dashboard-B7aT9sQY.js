import{r as i,L as W,j as e,Y as O,B as u}from"./app-BMEi1DEl.js";import{P as E}from"./chart.esm-B5p2zZCX.js";import{M as D,D as B}from"./message.esm-Xdmsoey5.js";import{P as L,M as R}from"./PageContainer-DZqaf_Jd.js";import{g as V}from"./PersonalInformation-DxCZjOlr.js";import"./index.esm-lbq44yXO.js";import"./inputtext.esm-BHb0MQd6.js";import"./toast.esm-hnqurAYi.js";import"./PersonalInformation-CdqNPyAs.js";import"./inputmask.esm-MLK-uFak.js";import"./car-BnQ5UupV.js";import"./styleclass.esm-BM8HIDaB.js";import"./sidebar.esm-HsiVc5qy.js";import"./ActiveOrder-_bfOW0KQ.js";import"./globalHelper-Dvraz-WU.js";import"./inputswitch.esm-CduDipFp.js";let a;function _({auth:x,csrfToken:d,errors:h,courierIsTransporting:g=!1}){const{layoutConfig:f}=i.useContext(W);i.useState([]);const[v,j]=i.useState(null);i.useState(null);const[b,m]=i.useState(null),[A,N]=i.useState(!1),[r,k]=i.useState({time:0,courierWaitOrdersCount:0,customerCount:0,count:0,graph:{thisWeek:{counts:[],times:[]},lastWeek:{counts:[],times:[]}}}),y=()=>{N(!0),V(d).then(t=>{t.status&&(k(t.statics),a.datasets[0].data=t.statics.graph.thisWeek.counts,a.datasets[1].data=t.statics.graph.thisWeek.times,a={...a})})};i.useEffect(()=>{y()},[]);const p=[{name:"Bu Hafta",code:"0"},{name:"Geçen Hafta",code:"1"}],w=()=>{m(p[0])},S=t=>{m(t.value),t.value.code==="1"?(a.datasets[0].data=r.graph.lastWeek.counts,a.datasets[1].data=r.graph.lastWeek.times):(a.datasets[0].data=r.graph.thisWeek.counts,a.datasets[1].data=r.graph.thisWeek.times),a={...a}},C=()=>{const t=getComputedStyle(document.documentElement),s=t.getPropertyValue("--primary-color"),l=t.getPropertyValue("--primary-600");return{labels:["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],datasets:[{label:"Sipariş Adedi",data:[],backgroundColor:[s],hoverBackgroundColor:[l],fill:!0,borderRadius:"3",borderSkipped:"top bottom",barPercentage:.5},{label:"Sipariş Teslimat Süresi Ortalama (dk)",data:[],backgroundColor:[t.getPropertyValue("--pink-300")],hoverBackgroundColor:[t.getPropertyValue("--pink-600")],fill:!0,borderRadius:"1",borderSkipped:"top bottom",barPercentage:.5}]}},n=t=>`/demo/images/dashboard/${t}.svg`;return i.useEffect(()=>{w()},[]),i.useEffect(()=>{const t=getComputedStyle(document.documentElement),s=t.getPropertyValue("--text-color-secondary"),l=t.getPropertyValue("--surface-border");a=C(),j({plugins:{legend:{position:"bottom",align:"end",labels:{color:s}}},responsive:!0,maintainAspectRatio:!1,hover:{mode:"index"},scales:{y:{min:0,ticks:{stepSize:0,color:s},grid:{color:l}},x:{grid:{tickBorderDash:[2,2],display:!0,color:l},ticks:{color:s}}}})},[f]),e.jsx(L,{auth:x,csrfToken:d,errors:h,courierIsTransporting:g,children:e.jsxs(R,{children:[e.jsx(O,{title:"İşletme Anasayfa"}),e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:"col-12",children:e.jsx(D,{severity:"info",text:"İşletme Anasayfasına Hoşgeldiniz! Veriler Son 14 Güne Ait Verilerdir.",className:"w-full tw-justify-start"})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-clock text-6xl text-blue-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-blue-500 block white-space-nowrap",children:"Ortalama Teslimat Süresi"}),e.jsxs("span",{className:"text-blue-500 block text-4xl font-bold",children:[r.time,"dk"]})]})]}),e.jsx("img",{src:n("users"),className:"w-full",alt:"users"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-users text-6xl text-orange-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-orange-500 block white-space-nowrap",children:"Müşteri Sayısı"}),e.jsx("span",{className:"text-orange-500 block text-4xl font-bold",children:r.customerCount})]})]}),e.jsx("img",{src:n("locations"),className:"w-full",alt:"locations"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card h-full p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-box text-6xl text-purple-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-purple-500 block white-space-nowrap",children:"Teslim Edilen Sipariş Adedi"}),e.jsx("span",{className:"text-purple-500 block text-4xl font-bold",children:r.count})]})]}),e.jsx("img",{src:n("interactions"),className:"w-full mt-auto",alt:"interactions"})]})}),e.jsx("div",{className:"col-12 lg:col-6 xl:col-3",children:e.jsxs("div",{className:"card p-0 overflow-hidden flex flex-column",children:[e.jsxs("div",{className:"flex align-items-center p-3",children:[e.jsx("i",{className:"pi pi-bolt text-6xl text-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-green-500 block white-space-nowrap",children:"Kurye Bekleyen Sipariş Adedi"}),e.jsxs("span",{className:"text-green-500 block text-4xl font-bold",children:[r.courierWaitOrdersCount," "]})]})]}),e.jsx("img",{src:n("rate"),className:"w-full",alt:"conversion"})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card h-full",children:[e.jsxs("div",{className:"flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{children:"Günlük Sipariş Grafiği"}),e.jsxs("div",{children:[e.jsx(B,{options:p,value:b,onChange:S,optionLabel:"name"}),e.jsx(u,{icon:"pi pi-cloud-download",tooltip:"PNG olarak kaydet",tooltipOptions:{position:"top"},className:"ml-2",severity:"secondary",outlined:!0,onClick:()=>{const t=document.querySelector(".graph canvas"),s=document.createElement("canvas");s.width=t.width,s.height=t.height;const l=s.getContext("2d");if(l){l.fillStyle="white",l.drawImage(t,0,0);const c=document.createElement("a");c.href=s.toDataURL("image/png");let o=Math.random().toString(36).substring(7);c.download=`siparis-grafigi-${o}.png`,c.click()}}}),e.jsx(u,{icon:"pi pi-print",tooltip:"Yazdır",tooltipOptions:{position:"top"},className:"ml-2",severity:"secondary",outlined:!0,onClick:async()=>{const t=document.querySelector(".graph canvas"),s=document.createElement("canvas");s.width=t.width,s.height=t.height,s.style.backgroundColor="#000";const l=s.getContext("2d");if(l){l.drawImage(t,0,0);const c=new Image;c.src=s.toDataURL("image/png",1),await new Promise(P=>{c.onload=P});const o=window.open("");o==null||o.document.write(c.outerHTML),await(o==null?void 0:o.print()),o==null||o.close()}}})]})]}),e.jsx("div",{className:"graph",children:e.jsx(E,{type:"bar",height:"400px",data:a,options:v})})]})})]})]})})}export{_ as default};
