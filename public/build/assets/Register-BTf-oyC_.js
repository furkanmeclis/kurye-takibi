import{r as d,j as a,Y as C,c as t,x as g,B as O,y as E}from"./app-DPLiFm8c.js";import{c as S,b as c,d as T,u as _,T as A,I as p}from"./toast.esm-oiITyh-p.js";import{F as B}from"./FullPageLayout-CqHmwsp7.js";import{I as q}from"./inputmask.esm-BKJz1pT0.js";const H=({csrfToken:w="",auth:F={}})=>{const[n,x]=d.useState(!1),m=d.useRef(null),[f,j]=d.useState(!1),N=S().shape({email:c().email("Geçerli bir email adresi giriniz").required("Email adresinizi giriniz"),name:c().required("Adınız ve soyadınızı giriniz").min(3,"Adınız en az 3 karakter olmalıdır"),password:c().required("Şifrenizi giriniz").min(6,"Şifreniz en az 6 karakter olmalıdır").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,"Şifreniz en az bir büyük harf, bir küçük harf ve bir rakam içermelidir"),password_confirmation:c().required("Şifrenizi tekrar giriniz").oneOf([T("password"),""],"Şifreler uyuşmuyor"),phone:c().required("Telefon numaranızı giriniz").matches(/^\(\d{3}\)-\d{3}-\d{4}$/,"Geçerli bir telefon numarası giriniz")}),{values:l,dirty:K,submitCount:s,setErrors:b,handleChange:o,handleSubmit:z,errors:e,isValid:v}=_({initialValues:{name:"",email:"",phone:"",password:"",password_confirmation:""},validationSchema:N,validateOnChange:f,validateOnBlur:f,onSubmit:k=>{x(!0);let u=new Headers;u.append("Content-Type","application/json"),u.append("X-CSRF-TOKEN",w),fetch(route("auth.register.store"),{method:"POST",headers:u,body:JSON.stringify(k)}).then(i=>i.json()).then(i=>{var h,y;if(i.status)(h=m.current)==null||h.show({severity:"success",summary:"Başarılı",detail:i.message}),E.visit(route((i==null?void 0:i.redirect)||"auth.login.index"));else{let r={};i!=null&&i.emailExists&&(i==null?void 0:i.emailExists)===!0&&(r={...r,email:"Bu email adresi zaten kullanılmakta"}),i!=null&&i.phoneExists&&(i==null?void 0:i.phoneExists)===!0&&(r={...r,phone:"Bu telefon numarası zaten kullanılmakta"}),b(r),(y=m.current)==null||y.show({severity:"error",summary:"Hata",detail:i.message})}}).catch(()=>{var i;(i=m.current)==null||i.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{x(!1)})}});return d.useEffect(()=>{s>0&&j(!0)},[s]),a.jsxs(B,{children:[a.jsx(C,{title:"Kayıt Ol"}),a.jsx(A,{ref:m}),a.jsx("div",{className:t("surface-ground h-screen w-screen flex align-items-center justify-content-center"),children:a.jsxs("form",{onSubmit:z,className:"surface-card py-7 px-5 sm:px-7 shadow-2 flex flex-column w-11 sm:w-30rem",style:{borderRadius:"14px"},children:[a.jsx("h1",{className:"font-bold text-2xl mt-0 mb-2",children:"Kayıt Formu"}),a.jsx("p",{className:"text-color-secondary mb-4",children:"Kayıt olmak için lütfen aşağıdaki bilgileri doldurunuz."}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-user",{"text-red-500":!!e.name,"text-green-500":e&&!e.name&&s>0})}),a.jsx(p,{type:"text",placeholder:"Adınız Soyadınız",autoComplete:"off",name:"name",tooltip:e==null?void 0:e.name,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:o,value:l.name,className:t("w-full",{"p-invalid":!!e.name})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.name,"pi-check-circle text-green-500":!e.name&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-at",{"text-red-500":!!e.email,"text-green-500":e&&!e.email&&s>0})}),a.jsx(p,{type:"email",autoComplete:"off",name:"email",tooltip:e==null?void 0:e.email,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:o,value:l.email,placeholder:"Email Adresiniz",className:t("w-full",{"p-invalid":!!e.email})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.email,"pi-check-circle text-green-500":!e.email&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-phone",{"text-red-500":!!e.phone,"text-green-500":e&&!e.phone&&s>0})}),a.jsx(q,{placeholder:"Telefon Numaranız",autoComplete:"off",name:"phone",tooltip:e==null?void 0:e.phone,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:o,value:l.phone,mask:"(999)-999-9999",className:t("w-full",{"p-invalid":!!e.phone})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.phone,"pi-check-circle text-green-500":!e.phone&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-key",{"text-red-500":!!e.password,"text-green-500":e&&!e.password&&s>0})}),a.jsx(p,{type:"password",autoComplete:"off",name:"password",tooltip:e==null?void 0:e.password,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:o,value:l.password,placeholder:"Şifreniz",className:t("w-full",{"p-invalid":!!e.password})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.password,"pi-check-circle text-green-500":!e.password&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-key",{"text-red-500":!!e.password_confirmation,"text-green-500":e&&!e.password_confirmation&&s>0})}),a.jsx(p,{type:"password",autoComplete:"off",name:"password_confirmation",tooltip:e==null?void 0:e.password_confirmation,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:o,value:l.password_confirmation,placeholder:"Şifrenizi Onaylayın",className:t("w-full",{"p-invalid":!!e.password_confirmation})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.password_confirmation,"pi-check-circle text-green-500":!e.password_confirmation&&s>0})})]}),a.jsxs("span",{className:"text-color-secondary flex justify-content-between mb-4",children:[a.jsx(g,{href:route("auth.password.request"),className:"text-color-secondary hover:text-color",children:"Şifremi Unuttum"}),a.jsx(g,{href:route("auth.login.index"),className:"text-color-secondary hover:text-color",children:"Giriş Yap"})]}),a.jsx(O,{label:"Kayıt Ol",className:"mb-4",disabled:!v,loading:n,type:"submit"})]})})]})};export{H as default};
