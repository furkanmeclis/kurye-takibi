import{r as o,y as z,j as e,Y as F,c as t,I as C,b as f,B as E}from"./app-DVumT1wj.js";import{c as I,b as g,u as k,T as O,I as b}from"./toast.esm-BmW987KP.js";import{F as R}from"./FullPageLayout-Dhg2n_or.js";const M=({csrfToken:y="",auth:T={}})=>{const[n,d]=o.useState(!1),r=o.useRef(null),[p,j]=o.useState(!1),w=I().shape({email:g().email("Geçerli bir email adresi giriniz").required("Email adresinizi giriniz"),password:g().required("Şifrenizi giriniz")}),{values:m,submitCount:s,setFieldValue:N,handleChange:u,handleSubmit:v,errors:a,isValid:S}=k({initialValues:{email:localStorage.getItem("loginEmailForRememberMe")||"",password:"",remember:!!localStorage.getItem("loginEmailForRememberMe")},validationSchema:w,validateOnChange:p,validateOnBlur:p,onSubmit:l=>{let c=new Headers;d(!0),c.append("Content-Type","application/json"),c.append("X-CSRF-TOKEN",y),fetch(route("login"),{method:"POST",headers:c,body:JSON.stringify(l)}).then(i=>i.json()).then(i=>{var x,h;i.status?(l.remember?localStorage.setItem("loginEmailForRememberMe",l.email):localStorage.removeItem("loginEmailForRememberMe"),(x=r.current)==null||x.show({severity:"success",summary:"Başarılı",detail:i.message}),z.visit(route((i==null?void 0:i.redirect)||"login"))):(h=r.current)==null||h.show({severity:"error",summary:"Hata",detail:i.message})}).catch(()=>{var i;(i=r.current)==null||i.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{d(!1)})}});return o.useEffect(()=>{s>0&&j(!0)},[s]),e.jsxs(R,{children:[e.jsx(F,{title:"Giriş Yap"}),e.jsx(O,{ref:r}),e.jsx("div",{className:t("surface-ground h-screen w-screen flex align-items-center justify-content-center"),children:e.jsxs("form",{onSubmit:v,className:"surface-card py-7 px-5 sm:px-7 shadow-2 flex flex-column w-11 sm:w-30rem",style:{borderRadius:"14px"},children:[e.jsx("h1",{className:"font-bold text-2xl mt-0 mb-2",children:"Giriş Formu"}),e.jsx("p",{className:"text-color-secondary",children:"Giriş yapmak için lütfen email adresinizi ve şifrenizi giriniz."}),e.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3 mt-4",children:[e.jsx("i",{className:t("pi pi-at",{"text-red-500":!!a.email,"text-green-500":a&&!a.email&&s>0})}),e.jsx(b,{type:"email",autoComplete:"off",name:"email",tooltip:a==null?void 0:a.email,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:u,value:m.email,placeholder:"Email Adresiniz",className:t("w-full",{"p-invalid":!!a.email})}),e.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!a.email,"pi-check-circle text-green-500":!a.email&&s>0})})]}),e.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[e.jsx("i",{className:t("pi pi-key",{"text-red-500":!!a.password,"text-green-500":a&&!a.password&&s>0})}),e.jsx(b,{type:"password",autoComplete:"off",name:"password",tooltip:a==null?void 0:a.password,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,className:t("w-full",{"p-invalid":!!a.password}),onChange:u,value:m.password,placeholder:"Şifreniz"}),e.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!a.password,"pi-check-circle text-green-500":!a.password&&s>0})})]}),e.jsxs("div",{className:"field-checkbox mb-3",children:[e.jsx(C,{checked:m.remember,inputId:"remember",onChange:l=>N("remember",l.value??!1)}),e.jsx("label",{htmlFor:"remember",className:"ml-2",children:"Beni Hatırla"})]}),e.jsxs("span",{className:"text-color-secondary flex justify-content-between mb-4",children:[e.jsx(f,{href:route("password.request"),className:"text-color-secondary hover:text-color",children:"Şifremi Unuttum"}),e.jsx(f,{href:route("register"),className:"text-color-secondary hover:text-color",children:"Kayıt Ol"})]}),e.jsx(E,{label:"Giriş Yap",className:"mb-4",disabled:!S,loading:n,type:"submit"})]})})]})};export{M as default};
