import{r as s,u as k,j as e,B as o,R as O,Y as L,a as R}from"./app-U6D2PzfD.js";import{P as E,M as F}from"./PageContainer-BdNeVY65.js";import{T as z}from"./toast.esm-DmrTv30h.js";import{g as A,e as G}from"./couriers-BFRc8dnL.js";import{O as H,C as V,D,a as v,T as I}from"./checkbox.esm-BvO80h6o.js";import{M}from"./message.esm-B7m32CDq.js";import{g as W,a as $}from"./globalHelper-BwHF33TP.js";import{D as Y}from"./dialog.esm-CoglO4JC.js";import"./PersonalInformation-yfbgH-Hy.js";import"./inputmask.esm-DkTyA19i.js";import"./PersonalInformation-ED77fZOX.js";import"./styleclass.esm-nfnQ_JLj.js";import"./index.esm-H1sz6LYB.js";const ne=({auth:N,csrfToken:h})=>{const[g,n]=s.useState(!0),[S,c]=s.useState(!1),[u,j]=s.useState([]),[d,B]=s.useState(null),[i,b]=k(["name","email","phone","details_button","created_at","actions"],"adminCouriersWaitApprovalDetailsColumns"),[x,y]=s.useState(null);s.useEffect(()=>{A("waitApprovals",h).then(t=>{t.status?(j(t.details),n(!1),y(null)):(y(t.message),n(!1))}).catch(t=>{y(t.message),n(!1)})},[]);const w=(t,a)=>{R({target:t.currentTarget,message:"Kurye Bilgileri Onaylanacaktır. Onaylamak istediğinize emin misiniz?",acceptLabel:"Onayla",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){n(!0),G(a,h).then(({status:l,message:r})=>{var m,f;l?(j(u.filter(_=>_.courier.id!==a)),(m=p.current)==null||m.show({severity:"success",summary:"Başarılı",detail:r})):(f=p.current)==null||f.show({severity:"error",summary:"Hata",detail:r})}).catch(l=>{var r;(r=p.current)==null||r.show({severity:"error",summary:"Hata",detail:l.message})}).finally(()=>{n(!1),c(!1)})}})};let C=[{field:"name",header:"Adı Soyadı",hidden:!i.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!i.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!i.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"details_button",header:"Kurye Bilgileri",hidden:!i.includes("details_button"),align:"center",body:t=>e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-file",tooltip:"Kurye Bilgileri",severity:"info",size:"small",tooltipOptions:{position:"top"},onClick:a=>{B(t),c(!0)}})})},{field:"updated_at",header:"Bilgilerin Güncellenme Tarihi",hidden:!i.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Bilgilerin Güncellenme Tarihine Göre",filterType:"date",body:t=>e.jsx("span",{children:new Date(t.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!i.includes("actions"),body:t=>e.jsx("div",{className:"flex gap-2",children:e.jsx(o,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:a=>{w(a,t.courier.id)}})})}];const P=O.useRef(null),T=t=>{let a=[];return t===null||Object.entries(t).forEach(([l,r])=>{typeof r=="string"&&(l!=="courier"||l!=="status"||l!=="completed"||l!=="approved"||l!=="latitude"||l!=="longitude"||l!=="id"||l!=="courier_id"||l!=="created_at"||l!=="updated_at")&&a.push({label:W(String(l)),value:$(String(l),String(r))})}),a},K=()=>e.jsx(e.Fragment,{children:e.jsx(I,{end:e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-bars",onClick:t=>{var a;(a=P.current)==null||a.toggle(t)}})})})}),p=O.useRef(null);return e.jsx(E,{auth:N,csrfToken:h,children:e.jsxs(F,{children:[e.jsx(L,{title:"Onay Bekleyen Kuryeler"}),e.jsx(z,{ref:p}),e.jsxs(H,{ref:P,showCloseIcon:!0,style:{width:"300px"},children:[e.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:e.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",i.length,")"]})}),e.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:C.map((t,a)=>{if(t.selectionMode==="multiple")return null;let l=t.header,r=t.field;return e.jsxs("div",{className:"flex align-items-center",children:[e.jsx(V,{inputId:`column${a}`,checked:i.includes(r),onChange:m=>{m.checked?b([...i,r]):b(i.filter(f=>f!==r))}}),e.jsx("label",{htmlFor:`column${a}`,className:"ml-2",children:l})]},a)})})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Onay Bekleyen Kuryeler (Kurye Bilgileri Onay Ekranı)"}),x!==null&&e.jsx(M,{className:"w-full",severity:"error",text:x}),!g&&u.length===0&&e.jsx(M,{className:"w-full",severity:"info",text:"Onay bekleyen kurye bulunamadı."}),e.jsx(D,{hidden:!g&&u.length===0||x!==null,loading:g,value:u,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:K,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},emptyMessage:"Kurye bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:C.map((t,a)=>e.jsx(v,{...t},a))}),e.jsx(Y,{header:"Kurye Bilgileri",draggable:!1,footer:e.jsxs("div",{className:"gap-2",children:[e.jsx(o,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>c(!1)}),e.jsx(o,{size:"small",icon:"pi pi-check-circle",label:"Bilgileri Onayla",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:t=>{var a;w(t,(a=d==null?void 0:d.courier)==null?void 0:a.id)}})]}),onHide:()=>c(!1),visible:S,style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs(D,{value:T(d),filters:{label:{value:null,matchMode:"contains"},value:{value:null,matchMode:"contains"}},filterDisplay:"row",paginator:!0,stripedRows:!0,rows:5,children:[e.jsx(v,{field:"label",showFilterMenu:!1,filter:!0,header:"Anahtar"}),e.jsx(v,{field:"value",showFilterMenu:!1,filter:!0,header:"Değer"})]})})]})]})})};export{ne as default};
