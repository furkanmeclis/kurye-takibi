import{r as v,u as O,j as t,c as H,B as m,y as R,R as z,Y as D,a as x}from"./app-j6PEhqpP.js";import{P as G,M as E}from"./PageContainer-CNKbsat-.js";import{T as B}from"./toast.esm-wwTx3ct0.js";import{g as F,d as V,a as $,m as I,b as Y}from"./couriers-BFRc8dnL.js";import{D as q,C as J}from"./column.esm-Cm-MnQRw.js";import{M as N}from"./message.esm-6Xok8xo0.js";import{C as Q,T as U}from"./checkbox.esm-DToyUyZG.js";import{O as W}from"./ActiveOrder-D2ZjGFlE.js";import{T as X}from"./tristatecheckbox.esm-Q06jJlPv.js";import"./PersonalInformation-BfZYf5oV.js";import"./inputtext.esm-DVoroEiL.js";import"./inputmask.esm-Dm9AOoXZ.js";import"./PersonalInformation-DkiGRzm-.js";import"./globalHelper-DC93hlCg.js";import"./styleclass.esm-ChhZHvQm.js";import"./sidebar.esm-fF8ZoMoc.js";import"./index.esm-fbcK3nX0.js";import"./inputswitch.esm-DWu5y5pa.js";import"./index.esm-X8ib2Dew.js";const ve=({auth:P,csrfToken:f,flash:d})=>{const[b,s]=v.useState(!0),[p,g]=v.useState([]),[h,y]=v.useState([]),[c,k]=O(["name","email","phone","created_at","actions"],"adminCouriersApprovedColumns"),[j,C]=v.useState(null),S=()=>{s(!0),F("all",f).then(e=>{e.status?(g(e.couriers.map(r=>({...r,activated:r.activated===1}))),s(!1),C(null)):(C(e.message),s(!1))}).catch(e=>{C(e.message),s(!1)}).finally(()=>s(!1))};v.useEffect(()=>{var e;S(),d!=null&&d.message&&((e=l.current)==null||e.show({severity:(d==null?void 0:d.type)??"info",summary:d.title,detail:d.message??""}))},[]);const A=(e,r)=>{x({target:e.currentTarget,message:"Kuryeyi silmek istediğinize emin misiniz?",acceptLabel:"Sil",acceptClassName:"p-button-danger",rejectLabel:"Vazgeç",accept(){s(!0),V(r,f).then(({status:a,message:i})=>{var n,o;a?(g(p.filter(u=>u.id!==r)),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:i})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:i})}).catch(a=>{var i;(i=l.current)==null||i.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>s(!1))}})},L=(e,r)=>{x({target:e.currentTarget,message:"Seçilen kuryeler silinecektir. Silmek istediğinize emin misiniz?",acceptLabel:`Sil (${r.length} Kurye)`,acceptClassName:"p-button-danger",rejectLabel:"Vazgeç",accept(){s(!0),I(r,f).then(({status:a,message:i})=>{var n,o;a?(g(p.filter(u=>!r.includes(u.id))),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:i})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:i})}).catch(a=>{var i;(i=l.current)==null||i.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>s(!1))}})},_=(e,r)=>{x({target:e.currentTarget,message:"Kurye Hesabı Aktifleştirilecektir. Aktifleştirmek istediğinize emin misiniz?",acceptLabel:"Aktfileştir",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){s(!0),$(r,f).then(({status:a,message:i})=>{var n,o;a?(g(p.map(u=>u.id===r?{...u,activated:!0,activated_at:new Date().toISOString()}:u)),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:i})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:i})}).catch(a=>{var i;(i=l.current)==null||i.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>s(!1))}})},M=(e,r)=>{x({target:e.currentTarget,message:"Seçilen kuryelerin hesapları aktifleştirilecektir. Aktifleştirmek istediğinize emin misiniz?",acceptLabel:`Aktifleştir (${r.length} Kurye)`,acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){s(!0),Y(r,f).then(({status:a,message:i})=>{var n,o;a?(g(p.map(u=>r.includes(u.id)?{...u,activated:!0,activated_at:new Date().toISOString()}:u)),y([]),(n=l.current)==null||n.show({severity:"success",summary:"Başarılı",detail:i})):(o=l.current)==null||o.show({severity:"error",summary:"Hata",detail:i})}).catch(a=>{var i;(i=l.current)==null||i.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>s(!1))}})};let w=[{selectionMode:"multiple",headerStyle:{width:"3rem"},header:""},{field:"name",header:"Adı Soyadı",hidden:!c.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!c.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!c.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"activated",header:"Aktiflik Durumu",hidden:!c.includes("activated"),sortable:!0,filter:!0,dataType:"boolean",filterElement:e=>t.jsx(X,{value:e.value,onChange:r=>e.filterApplyCallback(r.value)}),body:e=>t.jsx("i",{className:H("pi",{"pi-check-circle text-green-400":e.activated,"pi-times-circle text-red-400":!e.activated})})},{field:"activated_at",header:"Aktifleştirme Tarihi",hidden:!c.includes("activated_at"),sortable:!0,filter:!0,filterPlaceholder:"Aktifleştirme Tarihine Göre",filterType:"date",body:e=>t.jsx("span",{children:e.activated_at===null?t.jsx("i",{className:"pi pi-times-circle text-red-400"}):new Date(e.activated_at).toLocaleString()})},{field:"created_at",header:"Kayıt Tarihi",hidden:!c.includes("created_at"),sortable:!0,filter:!0,filterPlaceholder:"Kayıt Tarihine Göre",filterType:"date",body:e=>t.jsx("span",{children:new Date(e.created_at).toLocaleString()})},{field:"updated_at",header:"Güncelleme Tarihi",hidden:!c.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Güncellenme Tarihine Göre",filterType:"date",body:e=>t.jsx("span",{children:new Date(e.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!c.includes("actions"),body:e=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx(m,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Aktifleştir",tooltipOptions:{position:"top"},visible:!e.activated,onClick:r=>{_(r,e.id)}}),t.jsx(m,{size:"small",icon:"pi pi-pencil",severity:"warning",tooltip:"Düzenle",tooltipOptions:{position:"top"},onClick:()=>{R.visit(route("admin.couriers.edit",{id:e.id}))}}),t.jsx(m,{size:"small",icon:"pi pi-trash",severity:"danger",tooltip:"Sil",tooltipOptions:{position:"top"},onClick:r=>{A(r,e.id)}})]})}];const T=z.useRef(null),K=()=>t.jsx(t.Fragment,{children:t.jsx(U,{start:h.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(m,{size:"small",icon:"pi pi-check-circle",className:"mr-2",tooltip:"Toplu Aktifleştirme Yapmanızı Sağlar",tooltipOptions:{position:"top"},visible:h.map(e=>e.activated?null:e.id).filter(e=>e!==null).length>0,label:"Aktifleştir ("+h.map(e=>e.activated?null:e.id).filter(e=>e!==null).length+")",severity:"success",onClick:e=>{M(e,h.map(r=>r.activated?null:r.id).filter(r=>r!==null))}}),t.jsx(m,{size:"small",icon:"pi pi-trash",className:"mr-2",tooltip:"Seçilen Kuryeleri Silmenizi Sağlar",tooltipOptions:{position:"top"},label:"Sil ("+h.length+")",severity:"danger",onClick:e=>{L(e,h.map(r=>r.id))}}),t.jsx(m,{size:"small",icon:"pi pi-filter-slash",label:"Seçimi Temizle",severity:"warning",onClick:()=>y([])})]}),end:t.jsxs(t.Fragment,{children:[t.jsx(m,{size:"small",icon:"pi pi-sync",severity:"help",className:"mr-2",tooltip:"Verileri Yenile",tooltipOptions:{position:"top"},onClick:()=>{S()}}),t.jsx(m,{icon:"pi pi-bars",onClick:e=>{var r;(r=T.current)==null||r.toggle(e)}})]})})}),l=z.useRef(null);return t.jsx(G,{auth:P,csrfToken:f,children:t.jsxs(E,{children:[t.jsx(D,{title:"Tüm Kuryeler"}),t.jsx(B,{ref:l}),t.jsxs(W,{ref:T,showCloseIcon:!0,style:{width:"300px"},children:[t.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:t.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",c.length,")"]})}),t.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:w.map((e,r)=>{if(e.selectionMode==="multiple")return null;let a=e.header,i=e.field;return t.jsxs("div",{className:"flex align-items-center",children:[t.jsx(Q,{inputId:`column${r}`,checked:c.includes(i),onChange:n=>{n.checked?k([...c,i]):k(c.filter(o=>o!==i))}}),t.jsx("label",{htmlFor:`column${r}`,className:"ml-2",children:a})]},r)})})]}),t.jsxs("div",{className:"card",children:[t.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Tüm Kuryeler"}),j!==null&&t.jsx(N,{className:"w-full",severity:"error",text:j}),!b&&p.length===0&&t.jsx(N,{className:"w-full",severity:"info",text:"Kurye bulunamadı."}),t.jsx(q,{hidden:!b&&p.length===0||j!==null,loading:b,value:p,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:K,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"},activated:{value:null,matchMode:"equals"}},emptyMessage:"Kurye bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",selectionMode:"checkbox",selection:h,onSelectionChange:e=>y(e.value),children:w.map((e,r)=>t.jsx(J,{...e},r))})]})]})})};export{ve as default};
