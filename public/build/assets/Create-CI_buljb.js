import{R as D,r as u,j as s,Y as T,c as t,B as y}from"./app-xZ6V4ZBq.js";import{P as I,M as q}from"./PageContainer-CwrXYOTm.js";import{T as L,c as R,b as d,u as V,I as k}from"./toast.esm-BwFu0cm_.js";import{I as C}from"./inputmask.esm-9TJjYyx1.js";import{f as $}from"./customer-CjbiwGLN.js";import{c as m,I as x,D as z}from"./message.esm-AeWhPiLH.js";import"./PersonalInformation-CYS1VhTr.js";import"./PersonalInformation-D8vwnKYU.js";import"./styleclass.esm-SOOUVKZn.js";const X=({auth:S,csrfToken:h,page:f=!0,onComplete:A=()=>{}})=>{const p=D.useRef(null);u.useState(null);const g=()=>{var v;const[r,_]=u.useState(!1),[j,M]=u.useState(!1),F=R().shape({name:d().required("Ad soyad giriniz").min(3,"Ad Soyad en az 3 karakter olmalıdır"),phone:d().required("Telefon numarası giriniz").matches(/^\(\d{3}\)-\d{3}-\d{4}$/,"Geçerli bir telefon numarası giriniz"),note:d().nullable().min(3,"Müşteri notu en az 3 karakter olmalıdır"),address_title:d().required("Adres başlığı giriniz").min(2,"Adres başlığı en az 2 karakter olmalıdır"),address_phone:d().required("Adres telefon numarası giriniz").matches(/^\(\d{3}\)-\d{3}-\d{4}$/,"Geçerli bir adres telefon numarası giriniz"),address_city:d().required("Şehir seçiniz"),address_district:d().required("İlçe seçiniz"),address:d().required("Adres giriniz").min(5,"Adres en az 5 karakter olmalıdır"),address_notes:d().nullable().min(3,"Adres notu en az 3 karakter olmalıdır")}),{values:a,setFieldValue:n,resetForm:w,submitCount:i,setErrors:P,handleChange:o,handleSubmit:B,errors:e,isValid:O,dirty:E}=V({initialValues:{name:"",phone:"",note:"",address_title:"",address_city:m[0].il_adi,selectedCity:m[0],address_district:m[0].ilceler[0].ilce_adi,selectedDistrict:m[0].ilceler[0],address_phone:"",address:"",address_notes:""},validationSchema:F,validateOnChange:j,validateOnBlur:j,onSubmit:l=>{_(!0),$(l,h).then(c=>{var N,b;c.status?(A(),(N=p.current)==null||N.show({severity:"success",summary:"Başarılı",detail:c.message}),w()):(b=p.current)==null||b.show({severity:"error",summary:"Hata",detail:c.message})}).catch(()=>{var c;(c=p.current)==null||c.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{_(!1)})}});return u.useEffect(()=>{i>0&&M(!0)},[i]),s.jsxs("form",{onSubmit:B,className:"grid formgrid p-fluid",children:[s.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"name",className:t("font-medium text-900",{"text-red-500":!!e.name,"text-green-500":!e.name&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.name,"pi-check-circle text-green-500 text-sm":!e.name&&i>0})})," Müşteri Ad Soyad"]}),s.jsx(k,{id:"name",type:"text",autoComplete:"off",name:"name",tooltip:e==null?void 0:e.name,tooltipOptions:{position:"top"},disabled:r,onChange:o,value:a.name,className:t("w-full",{"p-invalid":!!e.name})})]}),s.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"phone",className:t("font-medium text-900",{"text-red-500":!!e.phone,"text-green-500":!e.phone&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.phone,"pi-check-circle text-green-500 text-sm":!e.phone&&i>0})})," Telefon Numarası"]}),s.jsx(C,{autoComplete:"off",name:"phone",tooltip:e==null?void 0:e.phone,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:r,onChange:o,value:a.phone,mask:"(999)-999-9999",className:t("w-full",{"p-invalid":!!e.phone})})]}),s.jsxs("div",{className:"field mb-4 col-12 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"note",className:t("font-medium text-900",{"text-red-500":!!e.note,"text-green-500":!e.note&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.note,"pi-check-circle text-green-500 text-sm":!e.note&&i>0})})," Müşteri Notu"]}),s.jsx(x,{autoComplete:"off",name:"note",id:"note",tooltip:e==null?void 0:e.note,tooltipOptions:{position:"top"},placeholder:"Bu alanı sadece işletme sahibi olarak siz görebilirsiniz.Zorunlu değildir.",disabled:r,onChange:o,value:a.note,className:t("w-full",{"p-invalid":!!e.note})})]}),s.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"addresss_title",className:t("font-medium text-900",{"text-red-500":!!e.address_title,"text-green-500":!e.address_title&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.address_title,"pi-check-circle text-green-500 text-sm":!e.address_title&&i>0})})," Adres Başlığı"]}),s.jsx(k,{id:"addresss_title",type:"text",autoComplete:"off",name:"address_title",tooltip:e==null?void 0:e.address_title,tooltipOptions:{position:"top"},disabled:r,onChange:o,value:a.address_title,className:t("w-full",{"p-invalid":!!e.address_title})})]}),s.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"address_phone",className:t("font-medium text-900 flex align-items-center gap-1",{"text-red-500":!!e.address_phone,"text-green-500":!e.address_phone&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.address_phone,"pi-check-circle text-green-500 text-sm":!e.address_phone&&i>0})})," Adres Telefon Numarası",s.jsx("div",{children:s.jsx(y,{type:"button",label:"Müşteri Telefonunu Kullan",severity:"success",className:"p-0 px-2",size:"small",onClick:()=>{n("address_phone",a.phone)}})})]}),s.jsx(C,{autoComplete:"off",name:"address_phone",tooltip:e==null?void 0:e.address_phone,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:r,onChange:o,value:a.address_phone,mask:"(999)-999-9999",className:t("w-full",{"p-invalid":!!e.address_phone})})]}),s.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"address_city",className:t("font-medium text-900",{"text-red-500":!!e.address_city,"text-green-500":!e.address_city&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.address_city,"pi-check-circle text-green-500 text-sm":!e.address_city&&i>0})})," İl"]}),s.jsx(z,{value:a.selectedCity,onChange:l=>{n("address_city",l.value.il_adi),n("selectedCity",l.value),n("district",l.value.ilceler[0].ilce_adi),n("selectedDistrict",l.value.ilceler[0])},options:m,optionLabel:"il_adi",inputId:"address_city",placeholder:"Şehir Seçiniz",className:t("w-full",{"p-invalid":!!e.address_city}),filter:!0,virtualScrollerOptions:{itemSize:38},emptyMessage:"Şehir Bulunamadı",emptyFilterMessage:"Şehir Bulunamadı",filterBy:"il_adi"})]}),s.jsxs("div",{className:"field mb-4 col-12 md:col-6 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"address_district",className:t("font-medium text-900",{"text-red-500":!!e.address_district,"text-green-500":!e.address_district&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.address_district,"pi-check-circle text-green-500 text-sm":!e.address_district&&i>0})})," İlçe"]}),s.jsx(z,{value:a.selectedDistrict,inputId:"address_district",disabled:a.selectedCity===null,onChange:l=>{n("address_district",l.value.ilce_adi),n("selectedDistrict",l.value)},options:(v=a.selectedCity)==null?void 0:v.ilceler,optionLabel:"ilce_adi",placeholder:"İlçe Seçiniz",className:t("w-full",{"p-invalid":!!e.address_district}),filter:!0,virtualScrollerOptions:{itemSize:38},emptyMessage:"İlçe Bulunamadı",emptyFilterMessage:"İlçe Bulunamadı",filterBy:"ilce_adi"})]}),s.jsxs("div",{className:"field mb-4 col-12 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"address",className:t("font-medium text-900",{"text-red-500":!!e.address,"text-green-500":!e.address&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.address,"pi-check-circle text-green-500 text-sm":!e.address&&i>0})})," Adres"]}),s.jsx(x,{autoComplete:"off",name:"address",id:"address",tooltip:e==null?void 0:e.address,tooltipOptions:{position:"top",event:"focus"},placeholder:"Müşteri adresi",disabled:r,onChange:o,value:a.address,className:t("w-full",{"p-invalid":!!e.address})})]}),s.jsxs("div",{className:"field mb-4 col-12 p-input-icon-right",children:[s.jsxs("label",{htmlFor:"address_notes",className:t("font-medium text-900",{"text-red-500":!!e.address_notes,"text-green-500":!e.address_notes&&i>0}),children:[s.jsx("i",{className:t("pi",{"pi-times-circle text-red-500 text-sm":!!e.address_notes,"pi-check-circle text-green-500 text-sm":!e.address_notes&&i>0})})," Adres Notu"]}),s.jsx(x,{autoComplete:"off",name:"address_notes",id:"address_notes",tooltip:e==null?void 0:e.address_notes,tooltipOptions:{position:"top",event:"focus"},placeholder:"Adres Notu (Zorunlu Değil)",disabled:r,onChange:o,value:a.address_notes,className:t("w-full",{"p-invalid":!!e.address_notes})})]}),s.jsx("div",{className:t("col-12",{"flex justify-content-end":!f}),children:s.jsx(y,{label:"Müşteriyi Ekle",disabled:!O||!E,loading:r,type:"submit",size:"small",className:"w-auto mt-3"})})]})};return f?s.jsx(I,{auth:S,csrfToken:h,children:s.jsxs(q,{children:[s.jsx(T,{title:"Yeni Müşteri Ekle"}),s.jsx(L,{ref:p}),s.jsxs("div",{className:"card",children:[s.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Yeni Müşteri Ekle"}),s.jsxs("div",{className:"grid",children:[s.jsxs("div",{className:"col-12 lg:col-2",children:[s.jsx("div",{className:"text-900 font-medium text-xl mb-3",children:"Müşteri Bilgileri"}),s.jsx("p",{className:"m-0 p-0 text-600 line-height-3 mr-3",children:"Adres Eklemek Zorunludur. Eklenecek Adres Daha Sonra Düzenlenebilir."})]}),s.jsx("div",{className:"col-12 lg:col-10",children:s.jsx(g,{},1)})]})]})]})}):s.jsx(g,{},2)};export{X as default};
