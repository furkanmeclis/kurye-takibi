import{r,u as R,j as e,B as o,R as O,Y as k,a as E}from"./app-CbKQlW76.js";import{P as F,M as z}from"./PageContainer-DSGVDqa6.js";import{T as A}from"./toast.esm-CNW18j1h.js";import{g as G,e as H}from"./businesses-B8cWdWWF.js";import{O as K,C as V,D as C,a as v,T as I}from"./checkbox.esm-CwLoQucT.js";import{M as D}from"./message.esm-wxyP2Vmm.js";import{g as W,a as $}from"./globalHelper-BwHF33TP.js";import{D as Y}from"./dialog.esm-BACwo-7o.js";import"./PersonalInformation-B8SBmz56.js";import"./inputmask.esm-BmHUkyvb.js";import"./PersonalInformation-BcPfBcsH.js";import"./styleclass.esm-CcXE0EGZ.js";import"./index.esm-Ddt82mjx.js";const ne=({auth:M,csrfToken:h})=>{const[g,n]=r.useState(!0),[N,c]=r.useState(!1),[u,j]=r.useState([]),[d,S]=r.useState(null),[i,y]=R(["name","email","phone","details_button","created_at","actions"],"adminBusinessesWaitApprovalDetailsColumns"),[x,b]=r.useState(null);r.useEffect(()=>{G("waitApprovals",h).then(t=>{t.status?(j(t.details),n(!1),b(null)):(b(t.message),n(!1))}).catch(t=>{b(t.message),n(!1)})},[]);const w=(t,a)=>{E({target:t.currentTarget,message:"İşletme Bilgileri Onaylanacaktır. Onaylamak istediğinize emin misiniz?",acceptLabel:"Onayla",acceptClassName:"p-button-success",rejectLabel:"Vazgeç",accept(){n(!0),H(a,h).then(({status:l,message:s})=>{var p,f;l?(j(u.filter(L=>L.business.id!==a)),(p=m.current)==null||p.show({severity:"success",summary:"Başarılı",detail:s})):(f=m.current)==null||f.show({severity:"error",summary:"Hata",detail:s})}).catch(l=>{var s;(s=m.current)==null||s.show({severity:"error",summary:"Hata",detail:l.message})}).finally(()=>{n(!1),c(!1)})}})};let P=[{field:"name",header:"Adı Soyadı",hidden:!i.includes("name"),sortable:!0,filter:!0,filterPlaceholder:"Ad'a Göre"},{field:"email",header:"Email Adresi",hidden:!i.includes("email"),sortable:!0,filter:!0,filterPlaceholder:"Email'e Göre"},{field:"phone",header:"Telefon Numarası",hidden:!i.includes("phone"),sortable:!0,filter:!0,filterPlaceholder:"Telefon Numarası'na Göre"},{field:"details_button",header:"İşletme Bilgileri",hidden:!i.includes("details_button"),align:"center",body:t=>e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-file",tooltip:"İşletme Bilgileri",severity:"info",size:"small",tooltipOptions:{position:"top"},onClick:a=>{S(t),c(!0)}})})},{field:"updated_at",header:"Bilgilerin Güncellenme Tarihi",hidden:!i.includes("updated_at"),sortable:!0,filter:!0,filterPlaceholder:"Bilgilerin Güncellenme Tarihine Göre",filterType:"date",body:t=>e.jsx("span",{children:new Date(t.updated_at).toLocaleString()})},{field:"actions",header:"İşlemler",hidden:!i.includes("actions"),body:t=>e.jsx("div",{className:"flex gap-2",children:e.jsx(o,{size:"small",icon:"pi pi-check-circle",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:a=>{w(a,t.business.id)}})})}];const B=O.useRef(null),T=t=>{let a=[];return t===null||Object.entries(t).forEach(([l,s])=>{typeof s=="string"&&(l!=="courier"||l!=="status"||l!=="completed"||l!=="approved"||l!=="latitude"||l!=="longitude"||l!=="id"||l!=="courier_id"||l!=="created_at"||l!=="updated_at")&&a.push({label:W(String(l)),value:$(String(l),String(s))})}),a},_=()=>e.jsx(e.Fragment,{children:e.jsx(I,{end:e.jsx(e.Fragment,{children:e.jsx(o,{icon:"pi pi-bars",onClick:t=>{var a;(a=B.current)==null||a.toggle(t)}})})})}),m=O.useRef(null);return e.jsx(F,{auth:M,csrfToken:h,children:e.jsxs(z,{children:[e.jsx(k,{title:"Onay Bekleyen İşletmeler"}),e.jsx(A,{ref:m}),e.jsxs(K,{ref:B,showCloseIcon:!0,style:{width:"300px"},children:[e.jsx("div",{className:"flex align-items-center justify-content-start mb-3",children:e.jsxs("span",{className:"text-900 text-lg font-bold",children:["Sütunlar (",i.length,")"]})}),e.jsx("div",{className:"flex flex-column justify-content-center gap-2",children:P.map((t,a)=>{if(t.selectionMode==="multiple")return null;let l=t.header,s=t.field;return e.jsxs("div",{className:"flex align-items-center",children:[e.jsx(V,{inputId:`column${a}`,checked:i.includes(s),onChange:p=>{p.checked?y([...i,s]):y(i.filter(f=>f!==s))}}),e.jsx("label",{htmlFor:`column${a}`,className:"ml-2",children:l})]},a)})})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-900 text-xl font-bold mb-4 block",children:"Onay Bekleyen İşletmeler (İşletme Bilgileri Onay Ekranı)"}),x!==null&&e.jsx(D,{className:"w-full",severity:"error",text:x}),!g&&u.length===0&&e.jsx(D,{className:"w-full",severity:"info",text:"Onay bekleyen İşletme bulunamadı."}),e.jsx(C,{hidden:!g&&u.length===0||x!==null,loading:g,value:u,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",header:_,filters:{name:{value:null,matchMode:"contains"},email:{value:null,matchMode:"contains"},phone:{value:null,matchMode:"contains"},created_at:{value:null,matchMode:"contains"},updated_at:{value:null,matchMode:"contains"}},emptyMessage:"İşletme bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:P.map((t,a)=>e.jsx(v,{...t},a))}),e.jsx(Y,{header:"İşletme Bilgileri",draggable:!1,footer:e.jsxs("div",{className:"gap-2",children:[e.jsx(o,{size:"small",icon:"pi pi-times",label:"Kapat",severity:"danger",tooltip:"Kapat",tooltipOptions:{position:"top"},onClick:()=>c(!1)}),e.jsx(o,{size:"small",icon:"pi pi-check-circle",label:"Bilgileri Onayla",severity:"success",tooltip:"Onayla",tooltipOptions:{position:"top"},onClick:t=>{var a;w(t,(a=d==null?void 0:d.business)==null?void 0:a.id)}})]}),onHide:()=>c(!1),visible:N,style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},children:e.jsxs(C,{value:T(d),filters:{label:{value:null,matchMode:"contains"},value:{value:null,matchMode:"contains"}},filterDisplay:"row",paginator:!0,stripedRows:!0,rows:5,children:[e.jsx(v,{field:"label",showFilterMenu:!1,filter:!0,header:"Anahtar"}),e.jsx(v,{field:"value",showFilterMenu:!1,filter:!0,header:"Değer"})]})})]})]})})};export{ne as default};
