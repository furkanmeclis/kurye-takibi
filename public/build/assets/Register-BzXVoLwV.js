import{r as m,L as E,j as a,Y as S,c as t,b as w,B as T,y as _}from"./app-DkDrHmnA.js";import{c as A,b as p,d as B,u as q,I as u}from"./inputtext.esm-BfTgRR7K.js";import{F as $}from"./FullPageLayout-BM-6xTQO.js";import{I as F}from"./inputmask.esm-BKDd5nSr.js";import{T as K}from"./toast.esm-P3S5sA5A.js";import"./index.esm-J_mJuZRe.js";const Y=({csrfToken:N="",auth:I={}})=>{const{layoutConfig:f}=m.useContext(E),b=()=>{const h="/layout/images/logo-";let l;return f.layoutTheme==="primaryColor"&&f.theme!=="yellow"?l="light.png":l=f.colorScheme==="light"?"dark.png":"light.png",h+l},[n,x]=m.useState(!1),d=m.useRef(null),[g,z]=m.useState(!1),v=A().shape({email:p().email("Geçerli bir email adresi giriniz").required("Email adresinizi giriniz"),name:p().required("Adınız ve soyadınızı giriniz").min(3,"Adınız en az 3 karakter olmalıdır"),password:p().required("Şifrenizi giriniz").min(6,"Şifreniz en az 6 karakter olmalıdır").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d!@#$%^&*(),.?":{}|<>]{6,}$/,"Şifreniz en az bir büyük harf, bir küçük harf ve bir rakam içermelidir"),password_confirmation:p().required("Şifrenizi tekrar giriniz").oneOf([B("password"),""],"Şifreler uyuşmuyor"),phone:p().required("Telefon numaranızı giriniz").matches(/^\(\d{3}\)-\d{3}-\d{4}$/,"Geçerli bir telefon numarası giriniz")}),{values:o,dirty:L,submitCount:s,setErrors:k,handleChange:r,handleSubmit:C,errors:e,isValid:O}=q({initialValues:{name:"",email:"",phone:"",password:"",password_confirmation:""},validationSchema:v,validateOnChange:g,validateOnBlur:g,onSubmit:h=>{x(!0);let l=new Headers;l.append("Content-Type","application/json"),l.append("X-CSRF-TOKEN",N),fetch(route("register"),{method:"POST",headers:l,body:JSON.stringify(h)}).then(i=>i.json()).then(i=>{var y,j;if(i.status)(y=d.current)==null||y.show({severity:"success",summary:"Başarılı",detail:i.message}),_.visit(route((i==null?void 0:i.redirect)||"login"));else{let c={};i!=null&&i.emailExists&&(i==null?void 0:i.emailExists)===!0&&(c={...c,email:"Bu email adresi zaten kullanılmakta"}),i!=null&&i.phoneExists&&(i==null?void 0:i.phoneExists)===!0&&(c={...c,phone:"Bu telefon numarası zaten kullanılmakta"}),k(c),(j=d.current)==null||j.show({severity:"error",summary:"Hata",detail:i.message})}}).catch(()=>{var i;(i=d.current)==null||i.show({severity:"error",summary:"Hata",detail:"Bir hata oluştu lütfen tekrar deneyiniz."})}).finally(()=>{x(!1)})}});return m.useEffect(()=>{s>0&&z(!0)},[s]),a.jsxs($,{children:[a.jsx(S,{title:"Kayıt Ol"}),a.jsx(K,{ref:d}),a.jsx("div",{className:t("surface-ground h-screen w-screen flex align-items-center justify-content-center"),children:a.jsxs("form",{onSubmit:C,className:"surface-card py-7 px-5 sm:px-7 shadow-2 flex flex-column w-11 sm:w-30rem",style:{borderRadius:"14px"},children:[a.jsx("div",{className:"flex justify-content-center mb-4",children:a.jsx("img",{src:b(),alt:"logo",className:"tw-h-20"})}),a.jsx("h1",{className:"font-bold text-2xl mt-0 mb-2",children:"Kayıt Formu"}),a.jsx("p",{className:"text-color-secondary mb-4",children:"Kayıt olmak için lütfen aşağıdaki bilgileri doldurunuz."}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-user",{"text-red-500":!!e.name,"text-green-500":e&&!e.name&&s>0})}),a.jsx(u,{type:"text",placeholder:"Adınız Soyadınız",autoComplete:"off",name:"name",tooltip:e==null?void 0:e.name,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:r,value:o.name,className:t("w-full",{"p-invalid":!!e.name})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.name,"pi-check-circle text-green-500":!e.name&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-at",{"text-red-500":!!e.email,"text-green-500":e&&!e.email&&s>0})}),a.jsx(u,{type:"email",autoComplete:"off",name:"email",tooltip:e==null?void 0:e.email,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:r,value:o.email,placeholder:"Email Adresiniz",className:t("w-full",{"p-invalid":!!e.email})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.email,"pi-check-circle text-green-500":!e.email&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-phone",{"text-red-500":!!e.phone,"text-green-500":e&&!e.phone&&s>0})}),a.jsx(F,{placeholder:"Telefon Numaranız",autoComplete:"off",name:"phone",tooltip:e==null?void 0:e.phone,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:r,value:o.phone,mask:"(999)-999-9999",className:t("w-full",{"p-invalid":!!e.phone})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.phone,"pi-check-circle text-green-500":!e.phone&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-key",{"text-red-500":!!e.password,"text-green-500":e&&!e.password&&s>0})}),a.jsx(u,{type:"password",autoComplete:"off",name:"password",tooltip:e==null?void 0:e.password,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:r,value:o.password,placeholder:"Şifreniz",className:t("w-full",{"p-invalid":!!e.password})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.password,"pi-check-circle text-green-500":!e.password&&s>0})})]}),a.jsxs("span",{className:"p-input-icon-left p-input-icon-right mb-3",children:[a.jsx("i",{className:t("pi pi-key",{"text-red-500":!!e.password_confirmation,"text-green-500":e&&!e.password_confirmation&&s>0})}),a.jsx(u,{type:"password",autoComplete:"off",name:"password_confirmation",tooltip:e==null?void 0:e.password_confirmation,tooltipOptions:{position:"top",event:"focus",className:"text-red-500"},disabled:n,onChange:r,value:o.password_confirmation,placeholder:"Şifrenizi Onaylayın",className:t("w-full",{"p-invalid":!!e.password_confirmation})}),a.jsx("i",{className:t("pi",{"pi-times-circle text-red-500":!!e.password_confirmation,"pi-check-circle text-green-500":!e.password_confirmation&&s>0})})]}),a.jsxs("span",{className:"text-color-secondary flex justify-content-between mb-4",children:[a.jsx(w,{href:route("password.request"),className:"text-color-secondary hover:text-color",children:"Şifremi Unuttum"}),a.jsx(w,{href:route("login"),className:"text-color-secondary hover:text-color",children:"Giriş Yap"})]}),a.jsx(T,{label:"Kayıt Ol",className:"mb-4",disabled:!O,loading:n,type:"submit"})]})})]})};export{Y as default};
